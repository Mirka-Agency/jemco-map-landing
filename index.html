<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Ø¬Ù…Ú©Ùˆ Ø¨Ø± Ø±ÙˆÛŒ Ù†Ù‚Ø´Ù‡</title>
		<link
			href="assets/fonts/vazirmatn-v33.003/Vazirmatn-Variable-font-face.css"
			rel="stylesheet"
		/>
		<link rel="icon" href="assets/img/fav.png" sizes="192x192" />
		<style>
			:root {
				--bg: #071022; /* dark deep */
				--panel: #0f1724cc;
				--accent: #6ee7b7;
				--accent-2: #7c5cff;
				--muted: #9aa8b2;
				--glass: rgba(255, 255, 255, 0.04);
				--neon: 0 0 16px rgba(124, 92, 255, 0.22),
					0 0 40px rgba(110, 231, 183, 0.06);
				--ui-size: 56px;
			}
			/* Target the scrollbar */
			::-webkit-scrollbar {
				width: 6px;
				height: 6px;
			}

			/* Track (background) */
			::-webkit-scrollbar-track {
				background: var(--bg);
				border-radius: 6px;
			}

			/* Handle (thumb) */
			::-webkit-scrollbar-thumb {
				background: #243a5ecc;
				border-radius: 6px;
			}

			/* Handle on hover */
			::-webkit-scrollbar-thumb:hover {
				background: #243a5ecc;
			}

			html,
			body {
				height: 100%;
				margin: 0;
				font-family: "Vazirmatn", ui-sans-serif, system-ui,
					-apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
			}
			body {
				background: radial-gradient(
						circle at 10% 10%,
						rgba(124, 92, 255, 0.06),
						transparent 10%
					),
					linear-gradient(180deg, #04101a 0%, var(--bg) 60%);
				color: #dfe9f2;
				overflow: hidden;
			}

			#stars {
				position: fixed;
				left: 0;
				top: 0;
				right: 0;
				bottom: 0;
				pointer-events: none;
				mix-blend-mode: screen;
				opacity: 0.5;
			}

			.app {
				height: 100%;
				display: grid;
				grid-template-columns: 1fr;
				align-items: center;
				justify-items: center;
				padding: 28px;
			}

			.controls {
				position: fixed;
				right: 22px;
				top: 22px;
				display: flex;
				flex-direction: column;
				gap: 12px;
				z-index: 60;
			}
			.toggle-group {
				display: flex;
				flex-direction: column;
				gap: 10px;
				align-items: flex-end;
			}

			.btn {
				width: var(--ui-size);
				height: var(--ui-size);
				display: inline-grid;
				place-items: center;
				border-radius: 12px;
				background-color: #eee;
				backdrop-filter: blur(6px);
				box-shadow: var(--neon);
				border: 1px solid rgba(255, 255, 255, 0.04);
				cursor: pointer;
			}
			.btn svg {
				width: 22px;
				height: 22px;
				opacity: 0.95;
			}
			.btn:active {
				transform: translateY(2px) scale(0.99);
			}
			.group-toggle {
				/* padding: 8px 12px; */
				border-radius: 999px;
				background: linear-gradient(
					90deg,
					rgba(255, 255, 255, 0.02),
					rgba(255, 255, 255, 0.01)
				);
				border: 1px solid rgba(255, 255, 255, 0.03);
				display: flex;
				gap: 8px;
				align-items: center;
			}

			.viewport {
				width: 100%;
				max-width: 75vw;
				height: 78vh;
				background: linear-gradient(
					180deg,
					rgba(12, 20, 30, 0.35),
					rgba(6, 10, 14, 0.4)
				);
				border-radius: 18px;
				padding: 18px;
				box-shadow: 0 10px 40px rgba(2, 6, 12, 0.6);
				position: relative;
				overflow: hidden;
				border: 10px solid #224;
			}

			.map-frame {
				position: absolute;
				inset: 0;
				border-radius: 12px;
				overflow: hidden;
				background: linear-gradient(
					180deg,
					rgba(0, 0, 0, 0.12),
					rgba(0, 0, 0, 0.18)
				);
			}
			.map-inner {
				position: absolute;
				left: 50%;
				top: 50%;
				transform-origin: 0 0;
				/* will-change: transform; */
				touch-action: none;
			}

			/* navy-blue tint overlay applied over the map image */
			.map-inner::before {
				content: "";
				position: absolute;
				inset: 0;
				pointer-events: none;
				z-index: 10; /* behind markers (markers have z-index:40) */
			}

			.map-img {
				display: block;
				max-width: none;
				user-select: none;
				pointer-events: none;

				position: relative;
				z-index: 0;
			}

			.marker {
				position: absolute;
				transform: translate(-50%, -50%);
				display: flex;
				flex-direction: column;
				align-items: center;
				gap: 15px;
				cursor: pointer;
				transition: transform 0.18s cubic-bezier(0.16, 0.8, 0.3, 1),
					filter 0.18s;
				z-index: 40;
			}
			.marker .badge {
				width: 85px;
				height: 85px;
				/* 	border-radius: 12px; */
				display: grid;
				place-items: center;
				/* 	background: linear-gradient(
					180deg,
					var(--accent),
					var(--accent-2)
				); */
				/* 	box-shadow: 0 6px 22px rgba(0, 0, 0, 0.45);
				border: 1px solid rgba(255, 255, 255, 0.06); */
				font-weight: 700;
				color: #041022;
			}
			.marker .badge img {
				width: 100%;
				height: 100%;
			}
			.marker[data-group="sales"] .badge {
				/* background: linear-gradient(180deg, #ffd166, #ff8a5b); */
			}
			.marker[data-type="office"] .badge {
				/* 	background: linear-gradient(180deg, #8ef3ff, #49c2ff);
				border-radius: 50%; */
			}
			.marker[data-type="factory"] .badge {
				/* 	background: linear-gradient(180deg, #ff9ac2, #ff5e9e);
				border-radius: 50%; */
			}
			.marker:hover {
				transform: translate(-50%, -50%) scale(1.12);
			}
			.marker .label {
				font-size: 1.3rem;
				background: var(--panel);
				padding: 6px 9px;
				border-radius: 8px;
				border: 1px solid rgba(255, 255, 255, 0.03);
				/* backdrop-filter: blur(6px); */
				white-space: nowrap;
			}

			/* popup: semi full-screen */
			.popup-full-backdrop {
				position: fixed;
				inset: 0;
				background: linear-gradient(
					180deg,
					rgba(2, 6, 12, 0.6),
					rgba(2, 6, 12, 0.8)
				);
				backdrop-filter: blur(6px);
				z-index: 120;
				display: flex;
				align-items: center;
				justify-content: center;
			}
			.popup-full {
				width: 92vw;
				max-width: 1200px;
				height: 86vh;
				border-radius: 14px;
				background: linear-gradient(
					180deg,
					rgba(8, 12, 18, 0.98),
					rgba(6, 8, 12, 0.98)
				);
				box-shadow: 0 30px 80px rgba(2, 6, 12, 0.75);
				border: 1px solid rgba(255, 255, 255, 0.04);
				display: flex;
				overflow: hidden;
				position: relative;
			}
			.popup-left {
				flex: 0 0 42%;
				min-width: 320px;
				background: linear-gradient(
					180deg,
					rgba(255, 255, 255, 0.02),
					rgba(255, 255, 255, 0.01)
				);
				display: flex;
				align-items: center;
				justify-content: center;
			}
			.popup-left img {
				max-width: 100%;
				max-height: 100%;
				height: 100%;
				width: 100%;
				object-fit: cover;
				border-radius: 8px 0 0 8px;
				box-shadow: 0 14px 40px rgba(0, 0, 0, 0.6);
			}
			.popup-right {
				flex: 1;
				padding: 22px 26px;
				overflow: auto;
				direction: rtl;
			}
			.popup-right h2 {
				margin: 0 0 8px 0;
				font-size: 20px;
			}
			.popup-right p {
				color: var(--muted);
				line-height: 1.5;
			}
			.popup-actions {
				margin-top: 16px;
				display: flex;
				gap: 10px;
			}
			.close {
				width: 36px;
				height: 36px;
				border-radius: 8px;
				display: grid;
				place-items: center;
				cursor: pointer !important;
			}

			.legend {
				position: fixed;
				left: 22px;
				top: 22px;
				background: var(--panel);
				padding: 10px;
				border-radius: 12px;
				border: 1px solid rgba(255, 255, 255, 0.03);
				backdrop-filter: blur(6px);
				z-index: 60;
			}
			.legend h3 {
				margin: 0 0 8px 0;
				font-size: 13px;
			}

			.hint {
				direction: rtl;
				position: fixed;
				right: 22px;
				bottom: 22px;
				background: linear-gradient(
					90deg,
					rgba(255, 255, 255, 0.02),
					rgba(255, 255, 255, 0.01)
				);
				padding: 10px;
				border-radius: 12px;
				border: 1px solid rgba(255, 255, 255, 0.03);
				font-size: 13px;
			}

			.copyright {
				direction: ltr;
				position: fixed;
				left: 22px;
				bottom: 22px;
				background: linear-gradient(
					90deg,
					rgba(255, 255, 255, 0.02),
					rgba(255, 255, 255, 0.01)
				);
				padding: 10px;
				border-radius: 12px;
				border: 1px solid rgba(255, 255, 255, 0.03);
				font-size: 13px;
			}
			@media (max-width: 900px) {
				:root {
					--ui-size: 48px;
				}
				.viewport {
					height: 72vh;
				}
			}
			@media (max-width: 560px) {
				.marker .badge {
					width: 40px;
					height: 40px;
				}
				.marker .label {
					display: none;
				}
				.popup-left {
					display: none;
				}
				.popup-full {
					width: 96vw;
					height: 86vh;
				}
			}

			@keyframes popupIn {
				0% {
					opacity: 0;
					transform: translateY(10px) scale(0.99);
				}
				100% {
					opacity: 1;
					transform: translateY(0) scale(1);
				}
			}
			.popup-animate {
				animation: popupIn 0.32s cubic-bezier(0.22, 0.9, 0.2, 1);
			}

			@keyframes pulse {
				0% {
					transform: scale(0.9);
				}
				50% {
					transform: scale(1.06);
				}
				100% {
					transform: scale(0.9);
				}
			}
			.pulse {
				animation: pulse 3s ease-in-out infinite;
			}

			.titlebar {
				text-align: right;
				position: fixed;
				left: 50%;
				transform: translateX(-50%);
				top: 14px;
				z-index: 70;
				padding: 10px 18px;
				border-radius: 999px;
				background: linear-gradient(
					90deg,
					rgba(255, 255, 255, 0.02),
					rgba(255, 255, 255, 0.01)
				);
				border: 1px solid rgba(255, 255, 255, 0.03);
				backdrop-filter: blur(6px);
				display: flex;
				gap: 14px;
				align-items: center;
			}
			.titlebar h1 {
				margin: 0;
				font-size: 16px;
				letter-spacing: 0.6px;
			}
			.titlebar small {
				display: block;
				font-size: 12px;
				color: var(--muted);
			}
			.audio-toggle {
				display: inline-grid;
				place-items: center;
				width: 36px;
				height: 36px;
				border-radius: 8px;
				background: rgba(255, 255, 255, 0.02);
				border: 1px solid rgba(255, 255, 255, 0.03);
				cursor: pointer;
			}

			.sales-popup-item {
				background-color: rgba(185, 185, 225, 0.2);
				padding: 12px;
				border-radius: 12px;
				margin-bottom: 12px;
			}

			.sales-popup-item h4 {
				font-size: 1.4rem;
				font-weight: bold;
			}

			iframe {
				border-radius: 15px;
			}

			.inline-popup-image {
				width: 100%;
				object-fit: contain;
				margin: 12px;
				border-radius: 12px;
			}
		</style>

		<link rel="preload" as="image" href="assets/img/sales/kerman.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/mashhad.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/hamedan.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/isfahan.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/khozestan.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/kurdistan.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/qazvin.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/tabriz.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/tehran.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/zanjan.jpg" />
	</head>
	<body>
		<canvas id="stars"></canvas>

		<!-- Audio elements (replace src with your files) -->
		<audio id="bgAudio" loop autoplay preload="auto">
			<!-- Provide your background music file here (mp3/ogg). Autoplay may be blocked until user interacts. -->
			<source src="assets/audio/bg.mp3" type="audio/mpeg" />
		</audio>
		<audio id="clickAudio" preload="auto">
			<!-- Provide your click/open sound here -->
			<source src="assets/audio/tap.mp3" type="audio/mpeg" />
		</audio>

		<div class="titlebar">
			<div style="display: flex; flex-direction: column">
				<h1>Ø´Ø±Ú©Øª Ø¬Ù…Ú©Ùˆ Ùˆ Ø±Ø§Ù‡Ú©Ø§Ø± Ù‡Ø§ÛŒ ÙÙˆÙ„Ø§Ø¯ Ùˆ Ù…Ø¹Ø¯Ù†</h1>
				<small>Ù‡Ù„Ø¯ÛŒÙ†Ú¯ ØµÙ†Ø§ÛŒØ¹ Ù…Ø¹Ø¯Ù†ÛŒ Ú©Ø§ÙˆÙ‡ Ù¾Ø§Ø±Ø³ </small>
			</div>
			<div style="width: 18px"></div>
			<div
				title="Toggle background audio"
				id="audioToggle"
				class="audio-toggle"
			>
				â–¶
			</div>
		</div>

		<div class="legend">
			<img src="assets/img/jemco-white.png" style="width: 120px" />
			<div style="display: none">
				<h3>Legend</h3>
				<div style="display: flex; gap: 8px; align-items: center">
					<div
						style="
							width: 14px;
							height: 14px;
							border-radius: 4px;
							background: linear-gradient(
								180deg,
								var(--accent),
								var(--accent-2)
							);
						"
					></div>
					<div style="font-size: 13px">Project</div>
				</div>
				<div
					style="
						display: flex;
						gap: 8px;
						align-items: center;
						margin-top: 6px;
					"
				>
					<div
						style="
							width: 14px;
							height: 14px;
							border-radius: 50%;
							background: linear-gradient(
								180deg,
								#8ef3ff,
								#49c2ff
							);
						"
					></div>
					<div style="font-size: 13px">Office</div>
				</div>
				<div
					style="
						display: flex;
						gap: 8px;
						align-items: center;
						margin-top: 6px;
					"
				>
					<div
						style="
							width: 14px;
							height: 14px;
							border-radius: 50%;
							background: linear-gradient(
								180deg,
								#ff9ac2,
								#ff5e9e
							);
						"
					></div>
					<div style="font-size: 13px">Factory</div>
				</div>
			</div>
		</div>

		<div class="controls">
			<div class="toggle-group">
				<div class="group-toggle" id="projects-toggle">
					<label for="projects-checkbox">Ù¾Ø±ÙˆÚ˜Ù‡ Ù‡Ø§ÛŒ Ø¬Ù…Ú©Ùˆ</label>
					<input
						type="checkbox"
						id="projects-checkbox"
						name="projects-checkbox"
						checked
						style="accent-color: var(--accent); margin-right: 6px"
					/>
				</div>
				<div class="group-toggle" id="sales-toggle">
					<label for="sales-checkbox">Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† ÙØ±ÙˆØ´</label>
					<input
						type="checkbox"
						id="sales-checkbox"
						name="sales-checkbox"
						checked
						style="accent-color: #ff8a5b; margin-right: 6px"
					/>
				</div>
			</div>
			<div style="height: 8px"></div>
			<div
				style="
					display: flex;
					flex-direction: column;
					gap: 8px;
					align-items: end;
				"
			>
				<button class="btn" id="zoom-in" title="Zoom in">
					<svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="1.6"
							d="M12 5v14M5 12h14"
						/>
					</svg>
				</button>
				<button class="btn" id="zoom-out" title="Zoom out">
					<svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="1.6"
							d="M5 12h14"
						/>
					</svg>
				</button>
			</div>
		</div>

		<div class="app">
			<div class="viewport" id="viewport">
				<div class="map-frame">
					<div
						class="map-inner"
						id="mapInner"
						style="
							left: 50%;
							top: 50%;
							transform: translate(-50%, -50%) scale(1)
								translate(0px, 0px);
						"
					>
						<img
							src="assets/map.png"
							alt="map"
							class="map-img"
							id="mapImage"
						/>

						<div
							class="marker"
							data-id="p2"
							data-group="projects"
							data-x="65.2"
							data-y="85.8"
							data-image=""
						>
							<div class="badge">
								<img src="assets/img/projects/msc.png" />
							</div>
							<div class="label">ÙÙˆÙ„Ø§Ø¯ Ù…Ø¨Ø§Ø±Ú©Ù‡</div>
						</div>

						<div
							class="marker"
							data-id="p3"
							data-group="projects"
							data-x="66.2"
							data-y="28.6"
							data-image=""
						>
							<div class="badge">C3</div>
							<div class="label">Project C3</div>
						</div>

						<!--Start Sales-->

						<div
							class="marker"
							data-id="s1"
							data-desc="
							<div class='sales-popup-item'>
							<h4>Ú©Ø§Ù„Ø§ ØµÙ†Ø¹ØªÛŒ</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
02191304300
<br/>
<b>Ø§ÛŒÙ…ÛŒÙ„:</b>
info@kalasanati.com
<br/>
<b>ÙˆØ¨Ø³Ø§ÛŒØª:</b>
www.kalasanati.com<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>
Ø§Ø³ØªØ§Ù† Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒØŒ Ù…Ø´Ù‡Ø¯ØŒ Ø¨Ù„ÙˆØ§Ø± Ø±ÛŒØ§Ø¶ÛŒØŒ Ø±ÛŒØ§Ø¶ÛŒ ÛµÛ±/Û²ØŒ Ø³Ø§Ø®ØªÙ…Ø§Ù† Ú©Ù„Ø§â€ŒØµÙ†Ø¹ØªÛŒØŒ Ø®ÛŒØ§Ø¨Ø§Ù† Ø³ÛŒØ¯ÛŒØŒ Ø§ÛŒØ±Ø§Ù†
							</div><div class='sales-popup-item'>
	<h4>Ø¬Ù‡Ø§Ù† Ù¾Ø§Ø±Øª</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
05133446135
<br/>
<b>Ø¢Ø¯Ø±Ø³:</b>
Ù…Ø´Ù‡Ø¯- Ø¨Ù„ÙˆØ§Ø± ÙØ±ÙˆØ¯Ú¯Ø§Ù‡ -Ù…Ù‚Ø§Ø¨Ù„ Ù¾Ù…Ù¾ Ø¨Ù†Ø²ÛŒÙ†-Ù¾Ù„Ø§Ú© 242-Ú©Ø¯ Ù¾Ø³ØªÛŒ 9165616413
							</div><div class='sales-popup-item'>
	<h4>Ø´Ø±Ú©Øª Ø¢Ø¨ ÙÙ„Ø² Ù¾Ù…Ù¾ Ø´Ø±Ù‚</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
05138665598
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>
Ù…Ø´Ù‡Ø¯-Ø¨Ù„ÙˆØ§Ø±ÙˆÚ©ÛŒÙ„ Ø¢Ø¨Ø§Ø¯ - Ù†Ø¨Ø´ ÙˆÚ©ÛŒÙ„ Ø¢Ø¨Ø§Ø¯34- Ù¾Ù„Ø§Ú©842-ÙƒØ¯Ù¾Ø³ØªÛŒ: 9178875669
							</div>

							<div class='sales-popup-item'>
	<h4>Ø´Ø±Ú©Øª Ø¢Ø¨ ÙÙ„Ø² Ù¾Ù…Ù¾ Ø´Ø±Ù‚</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
05138665598
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>
Ù…Ø´Ù‡Ø¯-Ø¨Ù„ÙˆØ§Ø±ÙˆÚ©ÛŒÙ„ Ø¢Ø¨Ø§Ø¯ - Ù†Ø¨Ø´ ÙˆÚ©ÛŒÙ„ Ø¢Ø¨Ø§Ø¯34- Ù¾Ù„Ø§Ú©842-ÙƒØ¯Ù¾Ø³ØªÛŒ: 9178875669
							</div>

							<div class='sales-popup-item'>
	<h4>Ø´Ø±Ú©Øª Ø¢Ø¨ ÙÙ„Ø² Ù¾Ù…Ù¾ Ø´Ø±Ù‚</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
05138665598
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>
Ù…Ø´Ù‡Ø¯-Ø¨Ù„ÙˆØ§Ø±ÙˆÚ©ÛŒÙ„ Ø¢Ø¨Ø§Ø¯ - Ù†Ø¨Ø´ ÙˆÚ©ÛŒÙ„ Ø¢Ø¨Ø§Ø¯34- Ù¾Ù„Ø§Ú©842-ÙƒØ¯Ù¾Ø³ØªÛŒ: 9178875669
							</div>
"
							data-image="assets/img/sales/mashhad.jpg"
							data-group="sales"
							data-x="130"
							data-y="76"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† Ù…Ø´Ù‡Ø¯</div>
						</div>

						<div
							class="marker"
							data-id="s2"
							data-desc="
							
							<div class='sales-popup-item'>
<h4>Ø´Ø±Ú©Øª Ø¹Ù…Ø±Ø§Ù† Ø¢Ø¨ Ø¨Ø§Ø¨Ú©Ø§Ù†</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
03432132961
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>Ú©Ø±Ù…Ø§Ù†- Ø¨Ù„ÙˆØ§Ø±Ø¢ÛŒØª Ø§...ØµØ¯ÙˆÙ‚ÛŒ(Ø¬Ø§Ø¯Ù‡ ØªÙ‡Ø±Ø§Ù†)Ø±ÙˆØ¨Ø±ÙˆÛŒ Ø´Ø±Ú©Øª Ø°ØºØ§Ù„Ø³Ù†Ú¯-Ù†Ø¨Ø´ Ø¨Ù„ÙˆØ§Ø±Ù‡ÙˆØ´Ù†Ú¯ Ù…Ø±Ø§Ø¯ÛŒ-ÙƒØ¯Ù¾Ø³ØªÛŒ7618844344<br/>
							</div>
							
"
							data-image="assets/img/sales/kerman.jpg"
							data-group="sales"
							data-x="115"
							data-y="120"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† Ú©Ø±Ù…Ø§Ù†</div>
						</div>

						<div
							class="marker"
							data-id="s3"
							data-desc="
							
							<div class='sales-popup-item'>
<h4>Ø¯Ø±Ù†ÛŒÚ©Ø§ Ø²Ø§Ú¯Ø±Ø³ ØµÙ†Ø¹Øª ØµÙØ§Ù‡Ø§Ù†</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
03142325000
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>Ø§ØµÙÙ‡Ø§Ù†-Ø¬Ø§Ø¯Ù‡ Ù†Ø¬Ù Ø¢Ø¨Ø§Ø¯ Ú¯Ù„Ø¯Ø´Øª-Ø¨Ù„ÙˆØ§Ø±Ù¾Ú˜ÙˆÙ‡Ø´-Ø±ÙˆØ¨Ø±ÙˆÛŒ Ø¨ÛŒÙ…Ø§Ø±Ø³ØªØ§Ù† ØªÙˆØ§Ù† Ø¨Ø®Ø´ÛŒ Ù…Ø¯Ø±Ø³-ØªÙ‚Ø§Ø·Ø¹ Ø§ÙˆÙ„-Ù¾Ù„Ø§Ú© 40<br/>
							</div>

							<div class='sales-popup-item'>
<h4>Ø´Ø±Ú©Øª Ø³Ø§Ù…Ø§Ù† Ø¢Ø¨ÛŒØ§Ø±</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
0313137122
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>Ø§ØµÙÙ‡Ø§Ù† - Ø§Ù…Ø§Ù… Ø®Ù…ÛŒÙ†ÛŒ -Ø¨Ø¹Ø¯ Ø§Ø² Ú†Ù‡Ø§Ø± Ø±Ø§Ù‡ Ø§Ù…Ø§Ù… Ø±Ø¶Ø§ -Ø±ÙˆØ¨Ø±ÙˆÛŒ Ø®ÛŒØ§Ø¨Ø§Ù† Ø´Ù‡ÛŒØ¯Ø§Ù† Ù…Ù‡Ø¯ÛŒ Ù¾ÙˆØ±-Ù†Ø¨Ø´ Ú©ÙˆÚ†Ù‡ 98<br/>
							</div>
							
"
							data-image="assets/img/sales/isfahan.jpg"
							data-group="sales"
							data-x="90"
							data-y="100"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† Ø§ØµÙÙ‡Ø§Ù†</div>
						</div>

						<div
							class="marker"
							data-id="s4"
							data-desc="
							
							<div class='sales-popup-item'>
<h4>Ø´Ø±Ú©Øª Ø¯Ú˜Ø¢Ø¨ Ø®ÙˆØ²Ø³ØªØ§Ù†</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
06142221527
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>Ø§Ù‡ÙˆØ§Ø²-Ø® Ø¢Ø²Ø§Ø¯Ú¯Ø§Ù†(24 Ù…ØªØ±ÙŠ Ù‚Ø¯ÙŠÙ…)-Ù†Ø¨Ø´ Ø±Ø³ØªÚ¯Ø§Ø±ÙŠ -Ù¾493-Ø·1-ÙƒØ¯Ù¾Ø³ØªÛŒ6193663395
<br/>
</div>

							
							
"
							data-image="assets/img/sales/khozestan.jpg"
							data-group="sales"
							data-x="72"
							data-y="115"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† Ø®ÙˆØ²Ø³ØªØ§Ù†</div>
						</div>

						<div
							class="marker"
							data-id="s5"
							data-desc="
							
							<div class='sales-popup-item'>
<h4>Ø´Ø±Ú©Øª ØªÙ„Ù…Ø¨Ù‡ Ù…ÙˆØªÙˆØ± ØºØ±Ø¨
</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
08132671415
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>Ù‡Ù…Ø¯Ø§Ù†- Ø® 17 Ø´Ù‡Ø±ÛŒÙˆØ±-Ø¬Ù†Ø¨ Ø¨Ø§Ø±Ø¨Ø±ÛŒ Ø§Ù„ÙˆÙ†Ø¯-ÙƒØ¯6513698539
<br/>
</div>

							
							
"
							data-image="assets/img/sales/hamedan.jpg"
							data-group="sales"
							data-x="70"
							data-y="88"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† Ù‡Ù…Ø¯Ø§Ù†</div>
						</div>

						<div
							class="marker"
							data-id="s5"
							data-desc="
							
							<div class='sales-popup-item'>
<h4>Ø´Ø±Ú©Øª Ø§Ù†Ø¯ÛŒØ´Ù‡ Ù†ÙˆÛŒÙ† Ø¢Ø¨ Ø¢ÙˆØ§Ù†
</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
02833685755
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>Ù‚Ø²ÙˆÛŒÙ†- Ø®ÛŒØ§Ø¨Ø§Ù† Ù†ÙˆØ±Ø²ÛŒØ§Ù† -Ø¨ÛŒÙ† Ø­Ú©Ù…Øª 18 Ùˆ 20 - Ù¾Ù„Ø§Ú© 138- ÙˆØ§Ø­Ø¯ 7
<br/>
</div>

							
							
"
							data-image="assets/img/sales/qazvin.jpg"
							data-group="sales"
							data-x="76"
							data-y="75"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† Ù‚Ø²ÙˆÛŒÙ†</div>
						</div>

						<div
							class="marker"
							data-id="s5"
							data-desc="
							
	<div class='sales-popup-item'>
<h4>ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø³ÙˆÙ†ØªÙˆ
</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
02433363541 , 09981147217
<br/>
<b>Ø§ÛŒÙ…ÛŒÙ„:</b> seventozanjan@gmail.com
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>Ø²Ù†Ø¬Ø§Ù† - Ø®ÛŒØ§Ø¨Ø§Ù† Ù‡ÙØª ØªÛŒØ± - Ù†Ø¨Ø´ Ú©ÙˆÚ†Ù‡ Ú©Ø±ÛŒÙ… Ø§Ù†ØµØ§Ø±ÛŒ Ù€ Ù¾Ù„Ø§Ú© 1.105
<br/>
</div>


							<div class='sales-popup-item'>
<h4>ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ù¾ÛŒØ´Ø±ÙˆØµÙ†Ø¹Øª ØµØ¯Ø± Ø¬Ù‡Ø§Ù†
</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
02433321051
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>Ø²Ù†Ø¬Ø§Ù†-Ø® ØµØ¯Ø± Ø¬Ù‡Ø§Ù†-Ø±ÙˆØ¨Ø±ÙˆÛŒ Ù¾Ø§Ø±Ú©ÛŒÙ†Ú¯ Ø§Ù…Ø§Ù…Ø²Ø§Ø¯Ù‡ - Ø¬Ù†Ø¨ Ù…Ø³Ø§ÙØ±Ø®Ø§Ù†Ù‡ Ø·Ø§Ø±Ù…- Ù¾ 267ÙƒØ¯4516653158
<br/>
</div>

							
							
"
							data-image="assets/img/sales/zanjan.jpg"
							data-group="sales"
							data-x="68"
							data-y="70"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† Ø²Ù†Ø¬Ø§Ù†</div>
						</div>

						<div
							class="marker"
							data-id="s5"
							data-desc="
							
	


							<div class='sales-popup-item'>
<h4>Ø´Ø±Ú©Øª Ù…Ù‡Ù†Ø¯Ø³ÛŒ Ø¨Ø±Ù‚ Ø¢Ø±Ø§Ù… ÙØ±Ø¯
</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
08733167155
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>Ø³Ù†Ù†Ø¯Ø¬-Ø®ÛŒØ§Ø¨Ø§Ù† Ø·Ø§Ù„Ù‚Ø§Ù†ÛŒ-Ø±ÙˆØ¨Ø±ÙˆÛŒ Ù¾Ù…Ù¾ Ø¨Ù†Ø²ÛŒÙ† Ú©Ø¯Ù¾Ø³ØªÛŒ 6614683898
<br/>
</div>

							
							
"
							data-image="assets/img/sales/kurdistan.jpg"
							data-group="sales"
							data-x="62"
							data-y="78"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† Ú©Ø±Ø¯Ø³ØªØ§Ù†</div>
						</div>

						<div
							class="marker"
							data-id="s5"
							data-desc="
							
	


							<div class='sales-popup-item'>
<h4>Ø´Ø±Ú©Øª ØªÙ„Ù…Ø¨Ù‡ Ø³Ø§Ø²Ø§Ù† ØªØ¨Ø±ÙŠØ²
</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
04134445277
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>ØªØ¨Ø±ÙŠØ²-Ø® Ø±Ø³Ø§Ù„Øª- Ø±ÙˆØ¨Ø±ÙˆÙŠ Ù…Ø¬ØªÙ…Ø¹ Ú¯Ù„Ø³ØªØ§Ù†-Ø¬Ù†Ø¨ ÙƒÙˆÙŠ ÙˆØ­Ø¯Øª-Ù¾62-ÙƒØ¯5178614944

<br/>
</div>												
"
							data-image="assets/img/sales/tabriz.jpg"
							data-group="sales"
							data-x="62"
							data-y="58"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù†â€ŒØ´Ø±Ù‚ÛŒ</div>
						</div>

						<div
							class="marker"
							data-id="s5"
							data-desc="
							
	

							<div class='sales-popup-item'>
<h4>Ú¯Ù„ Ø§Ù„Ú©ØªØ±ÛŒÚ© Ù¾Ø§Ø±Øª
</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
02174965
<br/>
<b>ÙˆØ¨Ø³Ø§ÛŒØª: </b> www.goalelectric.ir
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>
ØªÙ‡Ø±Ø§Ù† -Ø®ÛŒØ§Ø¨Ø§Ù† Ø·Ø§Ù„Ù‚Ø§Ù†ÛŒ Ø´Ø±Ù‚ÛŒ Ø¨Ø¹Ø¯ Ø§Ø² Ú†Ù‡Ø§Ø±Ø±Ø§Ù‡ Ø¨Ù‡Ø§Ø± Ø´Ù…Ø§Ø±Ù‡ 74 Ùˆ 76 Ø³Ø§Ø®ØªÙ…Ø§Ù† Ú¯Ù„ Ø§Ù„Ú©ØªØ±ÛŒÚ©

<br/>
</div>	



							<div class='sales-popup-item'>
<h4>Ø´Ø±Ú©Øª Ù¾Ø§Ø±Øª ØµÙ†Ø¹Øª Ø¨Ø±Ù†Ø§ Ø¨ÛŒÙ† Ø§Ù„Ù…Ù„Ù„
</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
02188550355
<br/>
<b>ÙˆØ¨Ø³Ø§ÛŒØª: </b> www.parstehran.ir
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>
ØªÙ‡Ø±Ø§Ù† -Ø®ÛŒØ§Ø¨Ø§Ù† ÙˆÙ„ÛŒØ¹ØµØ± - Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² Ø®ÛŒØ§Ø¨Ø§Ù† Ø´Ù‡ÛŒØ¯ Ø¨Ù‡Ø´ØªÛŒ-Ø¨Ø±Ø¬ Ø³Ù¾Ù‡Ø± Ø³Ø§Ø¹ÛŒ - Ø·Ø¨Ù‚Ù‡ Ø¯Ù‡Ù… -ÙˆØ§Ø­Ø¯ 1007
<br/>
</div>	



							<div class='sales-popup-item'>
<h4>Ù¾Ø¯ÛŒØ¯Ù‡ Ø³Ø§Ø²Ø§Ù† Ø§Ù„Ù…Ø§Ø³ Ù…ÙˆØªÙˆØ±
</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
02133935911
<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>
ØªÙ‡Ø±Ø§Ù† Ø®ÛŒØ§Ø¨Ø§Ù† Ø³Ø¹Ø¯ÛŒ Ø¬Ù†ÙˆØ¨ÛŒØŒ Ù…Ø¬ØªÙ…Ø¹ ØªØ¬Ø§Ø±ÛŒ Ø§Ø¯Ø§Ø±ÛŒ Ø³Ø¹Ø¯ÛŒ Ø·Ø¨Ù‚Ù‡ 6 ÙˆØ§Ø­Ø¯ 617

<br/>
</div>	



							<div class='sales-popup-item'>
<h4>Ø´Ø±Ú©Øª Ø§ÛŒÙØ§ ØµÙ†Ø¹Øª Ø¨Ù‡Ø³Ø§Ø²
</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
02136900486
<br/>
<b>ÙˆØ¨Ø³Ø§ÛŒØª: </b>   www.electromegagen.ir

<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>
ØªÙ‡Ø±Ø§Ù†- Ø®ÛŒØ§Ø¨Ø§Ù† Ø³Ø¹Ø¯ÛŒ Ø¬Ù†ÙˆØ¨ÛŒ - Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ø§Ø³ Ø³Ø¹Ø¯ÛŒ -Ø·Ø¨Ù‚Ù‡ Ø§ÙˆÙ„ -ÙˆØ§Ø­Ø¯23

<br/>
</div>	



							<div class='sales-popup-item'>
<h4>Ø´Ø±Ú©Øª Ù¾ÙˆÛŒØ§ Ù…ÙˆØªÙˆØ± Ø³Ù¾Ø§Ù‡Ø§Ù†
</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
02162767000

<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>
Ø¨Ø²Ø±Ú¯Ø±Ø§Ù‡ ÙØªØ­-45 Ù…ØªØ±ÛŒ Ø²Ø±Ù†Ø¯-Ø¨Ù„ÙˆØ§Ø±17Ø´Ù‡Ø±ÛŒÙˆØ±-Ù†Ø¨Ø´ Ø¨Ù„ÙˆØ§Ø± Ø·Ø§ÙˆÙˆØ³-Ù…Ø¬ØªÙ…Ø¹ ØªØ¬Ø§Ø±ÛŒ Ø§Ø¬Ù†Ø±Ø§Ù„-Ù¾Ù„Ø§Ú©5

<br/>
</div>	


							<div class='sales-popup-item'>
<h4>Ø´Ø±Ú©Øª Ù…ÙˆØªÙˆØ± Ù¾Ù…Ù¾ ÛŒØ§Ø±Ø§Ù†

</h4>
<b>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</b>
02133118199

<br/>
<b>Ø¢Ø¯Ø±Ø³: </b>
ØªÙ‡Ø±Ø§Ù†-Ø® Ø³Ø¹Ø¯ÛŒ Ø¬Ù†ÙˆØ¨ÛŒ-Ù…Ø±Ú©Ø²ØªØ¬Ø§Ø±ÛŒ Ø³Ø¹Ø¯ÛŒ-Ø·1-ÙˆØ§Ø­Ø¯106

<br/>
</div>	
"
							data-image="assets/img/sales/tehran.jpg"
							data-group="sales"
							data-x="84"
							data-y="79"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† ØªÙ‡Ø±Ø§Ù†</div>
						</div>
						<!--End Sales-->

						<div
							class="marker"
							data-id="office"
							data-type="office"
							data-group="fixed"
							data-image="assets/img/jemco1.jpg"
							data-desc="
							<p>Ø¬Ù…Ú©ÙˆØŒ Ø¨Ø§ Ø³Ø§Ø¨Ù‚Ù‡â€ŒØ§ÛŒ Ø¯Ø±Ø®Ø´Ø§Ù† Ø¯Ø± Ø·Ø±Ø§Ø­ÛŒ Ùˆ ØªÙˆÙ„ÛŒØ¯ Ø§Ù„Ú©ØªØ±ÙˆÙ…ÙˆØªÙˆØ±ØŒ Ø¨Ù‡â€ŒØ¹Ù†ÙˆØ§Ù† Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒØ§ÛŒ Ù¾ÛŒØ´ØªØ§Ø² Ø¯Ø± ØµÙ†Ø¹Øª Ú©Ø´ÙˆØ± ÙØ¹Ø§Ù„ÛŒØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯. ØªÚ©ÛŒÙ‡ Ø¨Ø± Ø¯Ø§Ù†Ø´ ØªØ®ØµØµÛŒØŒ Ø²ÛŒØ±Ø³Ø§Ø®Øªâ€ŒÙ‡Ø§ÛŒ ÙÙˆÙ‚ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ùˆ Ø±Ø¹Ø§ÛŒØª Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Ø¨ÛŒÙ†â€ŒØ§Ù„Ù…Ù„Ù„ÛŒØŒ Ø¬Ù…Ú©Ùˆ Ø±Ø§ Ø¨Ù‡ Ù‚Ø¯Ø±ØªÛŒ Ø¹Ø¸ÛŒÙ… Ø¯Ø± Ø¨Ø§Ø²Ø§Ø±Ù‡Ø§ÛŒ ØµÙ†Ø¹ØªÛŒ Ø¯Ø§Ø®Ù„ÛŒ Ùˆ Ù…Ù†Ø·Ù‚Ù‡â€ŒØ§ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª.</p>
							<p>Ø´Ø±Ú©Øª Ù…Ø§Ø´ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ø§Ù„Ú©ØªØ±ÛŒÚ©ÛŒ Ø¬ÙˆÛŒÙ† (Ø¬Ù…Ú©Ùˆ) Ø¯Ø± Ø³Ø§Ù„ Û±Û³Û¶Û¹ Ø¨Ø§ Ù‡Ø¯Ù Ú©Ø§Ù‡Ø´ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ ØµÙ†Ø§ÛŒØ¹ Ø¯Ø§Ø®Ù„ÛŒ Ø¨Ù‡ Ù…Ù†Ø§Ø¨Ø¹ Ø®Ø§Ø±Ø¬ÛŒØŒ Ø¯Ø± Ø´Ù‡Ø±Ø³ØªØ§Ù† Ø³Ø¨Ø²ÙˆØ§Ø± ØªØ£Ø³ÛŒØ³ Ø´Ø¯. Ø§ÛŒÙ† Ø´Ø±Ú©Øª Ø¨Ø§ Ø¨Ù‡Ø±Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø§Ø² Ù†ÛŒØ±ÙˆÙ‡Ø§ÛŒ Ù…ØªØ®ØµØµ Ùˆ ØªØ¬Ù‡ÛŒØ²Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡ØŒ Ø·Ø±Ø§Ø­ÛŒØŒ Ø³Ø§Ø®ØªØŒ ØªØ³Øª Ùˆ ØªØ¹Ù…ÛŒØ± Ø§Ù†ÙˆØ§Ø¹ Ø§Ù„Ú©ØªØ±ÙˆÙ…ÙˆØªÙˆØ±Ù‡Ø§ Ùˆ Ú˜Ù†Ø±Ø§ØªÙˆØ±Ù‡Ø§ Ø±Ø§ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ú©Ø§Ù…Ù„ Ø¨Ø± Ø¹Ù‡Ø¯Ù‡ Ø¯Ø§Ø±Ù†Ø¯.</p>

							<br/>
						<h3>	Ú†Ø´Ù…â€ŒØ§Ù†Ø¯Ø§Ø² Ø¬Ù…Ú©Ùˆ</h3>
<p>Ø¬Ù…Ú©Ùˆ Ø¨Ø§ Ù‡Ø¯Ù ØªÙˆÙ„ÛŒØ¯ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ø±ØªØ± Ø¯Ø± Ø§ÛŒØ±Ø§Ù† Ùˆ Ø®Ø§ÙˆØ±Ù…ÛŒØ§Ù†Ù‡ØŒ Ø±ÙˆÛŒÚ©Ø±Ø¯ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ú©ÛŒÙÛŒØªØŒ Ù†ÙˆØ¢ÙˆØ±ÛŒ Ùˆ Ø±Ù‚Ø§Ø¨Øªâ€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¯Ø§Ø±Ø¯. Ø§Ø² Ø§ÛŒÙ† Ø±ÙˆØŒ ØªÙˆØ§Ù†Ø³ØªÙ‡ Ø§Ø³Øª Ø¬Ø§ÛŒÚ¯Ø§Ù‡ÛŒ Ù‚Ø§Ø¨Ù„â€ŒØ§Ø¹ØªÙ…Ø§Ø¯ Ø¯Ø± Ø¨Ø§Ø²Ø§Ø± Ù…Ù†Ø·Ù‚Ù‡ Ø¨Ù‡ Ø¯Ø³Øª Ø¢ÙˆØ±Ø¯.</p>
<p>Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…ÙˆØ§Ø¯ Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø§ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Ø¨ÛŒÙ†â€ŒØ§Ù„Ù…Ù„Ù„ÛŒØŒ Ø¨Ù‡Ø±Ù‡â€ŒÙ…Ù†Ø¯ÛŒ Ø§Ø² ØªØ¬Ù‡ÛŒØ²Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡ØŒ Ú©Ù†ØªØ±Ù„ Ú©ÛŒÙÛŒ Ø¯Ù‚ÛŒÙ‚ Ø¯Ø± Ù…Ø±Ø§Ø­Ù„ ØªÙˆÙ„ÛŒØ¯ Ùˆ Ø¨Ø±Ø®ÙˆØ±Ø¯Ø§Ø±ÛŒ Ø§Ø² Ù†ÛŒØ±ÙˆÛŒ Ø§Ù†Ø³Ø§Ù†ÛŒ Ù…ØªØ®ØµØµØŒ Ù†Ù…Ø§ÛŒØ§Ù†Ú¯Ø± ØªØ¹Ù‡Ø¯ Ø¬Ù…Ú©Ùˆ Ø¨Ù‡ Ø§Ø±Ø§Ø¦Ø© Ù…Ø­ØµÙˆÙ„Ø§ØªÛŒ Ù‡Ù…â€ŒØªØ±Ø§Ø² Ø¨Ø§ Ú©ÛŒÙÛŒØª Ø¬Ù‡Ø§Ù†ÛŒ Ùˆ Ø­ÙØ¸ Ø¬Ø§ÛŒÚ¯Ø§Ù‡ Ø®ÙˆØ¯ Ø¨Ù‡â€ŒØ¹Ù†ÙˆØ§Ù† Ø¨Ø±Ù†Ø¯ Ø¨Ø±ØªØ± ØµÙ†Ø¹ØªÛŒ Ø§Ø³Øª.</p>

<style>.h_iframe-aparat_embed_frame{position:relative;}.h_iframe-aparat_embed_frame .ratio{display:block;width:100%;height:auto;}.h_iframe-aparat_embed_frame iframe{position:absolute;top:0;left:0;width:100%;height:100%;}</style><div class='h_iframe-aparat_embed_frame'><span style='display: block;padding-top: 57%'></span><iframe src='https://www.aparat.com/video/video/embed/videohash/kyrbocp/vt/frame'  allowFullScreen='true' webkitallowfullscreen='true' mozallowfullscreen='true'></iframe></div>
							"
							data-x="90"
							data-y="81"
						>
							<div class="badge">
								<img src="assets/img/office.png" />
							</div>
							<div class="label">Ø¯ÙØªØ± Ù…Ø±Ú©Ø²ÛŒ Ø¬Ù…Ú©Ùˆ</div>
						</div>

						<div
							class="marker"
							data-id="factory"
							data-type="factory"
							data-group="fixed"
							data-image="assets/img/jemco-factory.jpg"
							data-x="118"
							data-y="71"
							data-desc="<p>

								Ø§Ù„Ú©ØªØ±ÙˆÙ…ÙˆØªÙˆØ±Ù‡Ø§ Ùˆ Ú˜Ù†Ø±Ø§ØªÙˆØ±Ù‡Ø§ÛŒ Ø¬Ù…Ú©Ùˆ Ù…Ø·Ø§Ø¨Ù‚ Ø¨Ø§ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Ø¨ÛŒÙ† Ø§Ù„Ù…Ù„Ù„ÛŒ Ùˆ Ø³Ø§Ø²Ù…Ø§Ù† Ù…Ù„ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ø§ÛŒØ±Ø§Ù† Ù‡Ø³ØªÙ†Ø¯.
Ù‡Ù…Ú†Ù†ÛŒÙ†ØŒ Ø¬Ù…Ú©Ùˆ Ø¯Ø± Ø±Ø§Ø³ØªØ§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯ ÙØ±Ù‡Ù†Ú¯ Ù…Ø´ØªØ±ÛŒ Ù…Ø¯Ø§Ø±ÛŒ Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ† Ø·Ø± Ø­ Ù‡Ø§ Ùˆ Ù…ÙˆØ§Ø¯ Ø±Ø§ Ø¨Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒØ¨Ø±Ø¯ ØªØ§ Ø¨Ù‡ØªØ±ÛŒÙ† Ø¹Ù…Ù„Ú©Ø±Ø¯
Ø§Ù„Ú©ØªØ±ÛŒÚ©ÛŒ Ùˆ Ù…Ú©Ø§Ù†ÛŒÚ©ÛŒ Ø±Ø§ Ø§Ø±Ø§Ø¦Ù‡ Ø¯Ù‡Ø¯. Ø¯Ø± Ø·ÙˆÙ„ Ø³Ù‡ Ø¯Ù‡Û€ Ú¯Ø°Ø´ØªÙ‡ØŒ Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ Ú¯Ø³ØªØ±Ø´ ØµÙ†Ø¹ØªØŒ Ø§ÛŒÙ† Ø´Ø±Ú©Øª Ù†ÛŒØ² Ø±Ø´Ø¯ Ú†Ø´Ù…Ú¯ÛŒØ±ÛŒ
Ø¯Ø§Ø´ØªÙ‡ Ø§Ø³Øª Ùˆ Ø¨Ø§ ÛµÛ°Û° Ù†ÙØ± Ù†ÛŒØ±ÙˆÛŒ Ú©Ø§Ø±ØŒ Ø§Ø² Ø¬Ù…Ù„Ù‡ Û±Û·Û´ Ù…ØªØ®ØµØµØŒ Û±Û² ÙˆØ§Ø­Ø¯ ØªÙˆÙ„ÛŒØ¯ÛŒ Ùˆ Ø®Ø¯Ù…Ø§Øª Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù…ØªÙ…Ø±Ú©Ø²ØŒ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù†
Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÛŒ Ø´ÙˆØ¯ Ùˆ Ù…Ø­ØµÙˆÙ„Ø§Øª Ú¯Ø³ØªØ±Ø¯Ù‡â€ŒØ§ÛŒ Ø±Ø§ Ø¯Ø± Ø³Ø·Ø­ Ù…Ù„ÛŒØŒ Ø¨Ù‡ Ø·ÙˆØ± Ù…Ø³ØªÙ‚ÛŒÙ…ØŒ Ø¯Ø± ØªØ§Ø±Ù†Ù…Ø§ÛŒ Ø§ÛŒÙ†ØªØ±Ù†ØªÛŒ Ùˆ Ù‡Ù…Ú†Ù†ÛŒÙ†
Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯ÛŒÙ‡Ø§ Ø¨Ù‡ ÙØ±ÙˆØ´ Ù…ÛŒ Ø±Ø³Ø§Ù†Ø¯.
							</p>
							<img class='inline-popup-image' src='assets/img/factory1.jpg'/>
							<p>
Ø´Ø±Ú©Øª Ø¬Ù…Ú©Ùˆ Ø§ÙØ²ÙˆÙ† Ø¨Ø± ØªØ£ÛŒÛŒØ¯ÛŒÛ€ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ù…Ù„ÛŒ Ø§ÛŒØ±Ø§Ù† Ùˆ Ø§ØªØ­Ø§Ø¯ÛŒÛ€ Ø§Ø±ÙˆÙ¾Ø§ (CE)ØŒ ØªØ£ÛŒÛŒØ¯ÛŒÛ€ ATEX Ø±Ø§ Ø§Ø² Ø´Ø±Ú©Øª ECM Ø§ÛŒØªØ§Ù„ÛŒØ§ Ø¨Ø±Ø§ÛŒ
Ø§Ù„Ú©ØªØ±ÙˆÙ…ÙˆØªÙˆØ±Ù‡Ø§ÛŒ Ø¶Ø¯Ø§Ù†ÙØ¬Ø§Ø± Ùˆ ØªØ£ÛŒÛŒØ¯ÛŒÙ‡ Ø´Ø±Ú©Øª DEDAL Ø¨Ù„ØºØ§Ø±Ø³ØªØ§Ù† Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ù„Ú©ØªØ±ÙˆÙ…ÙˆØªÙˆØ±Ù‡Ø§ÛŒ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¯ÙˆØ¯ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª. Ø¨Ø±
Ø§ÛŒÙ† Ø§Ø³Ø§Ø³ØŒ Ù‡Ù…Û€ Ø§Ù„Ú©ØªØ±ÙˆÙ…ÙˆØªÙˆØ±Ù‡Ø§ Ùˆ Ú˜Ù†Ø±Ø§ØªÙˆØ±Ù‡Ø§ÛŒ Ø§ÛŒÙ† Ø´Ø±Ú©Øª Ø¨Ø¯ÙˆÙ† Ù‡Ø±Ú¯ÙˆÙ†Ù‡ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ø§Ù…Ú©Ø§Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Ø³Ø·Ø­ Ù…Ù„ÛŒ
Ùˆ Ø¨ÛŒÙ† Ø§Ù„Ù…Ù„Ù„ÛŒ Ø±Ø§ Ø¯Ø§Ø±Ù†Ø¯. Ù‡Ù…Ú†Ù†ÛŒÙ†ØŒ Ø´Ø±Ú©Øª Ø¬Ù…Ú©Ùˆ Ø¯Ø± Ø³Ø§Ù„ Û±Û´Û°Û± Ù…ÙˆÙÙ‚ Ø´Ø¯ Ø¹Ù†ÙˆØ§Ù† Â«Ø¯Ø§Ù†Ø´â€ŒØ¨Ù†ÛŒØ§Ù†Â» Ø±Ø§ Ø§Ø² Ø³ÙˆÛŒ Ù…Ø¹Ø§ÙˆÙ†Øª Ø¹Ù„Ù…ÛŒ
Ø±ÛŒØ§Ø³Øª Ø¬Ù…Ù‡ÙˆØ±ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†Ø¯. Ø§ÛŒÙ† ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ØŒ Ø§Ù†Ú¯ÛŒØ²Û€ Ù„Ø§Ø²Ù… Ø±Ø§ Ø¨Ù‡ Ø´Ø±Ú©Øª Ø¬Ù…Ú©Ùˆ Ø¯Ø§Ø¯Ù‡ Ø§Ø³Øª ØªØ§ Ø¨Ù‡ ØªÙˆÙ„ÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ Ø§ÛŒ Ø¬Ù‡Ø§Ù†ÛŒ Ø¯Ø±
ØµÙ†Ø¹Øª Ø§Ù„Ú©ØªØ±ÙˆÙ…ÙˆØªÙˆØ± ØªØ¨Ø¯ÛŒÙ„ Ø´ÙˆØ¯. Ù‡Ù…Ú†Ù†ÛŒÙ† Ø´Ø±Ú©Øª Ø¬Ù…Ú©Ùˆ Ø¯Ø± Ø±Ø§Ø³ØªØ§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯ ÙØ±Ù‡Ù†Ú¯ Ù…Ø´ØªØ±ÛŒ Ù…Ø¯Ø§Ø±ÛŒ Ø§Ù‚Ø¯Ø§Ù… Ø¨Ù‡ Ø§Ø±Ø§Ø¦Ù‡ Ø®Ø¯Ù…Ø§Øª
Ù¾Ø³ Ø§Ø² ÙØ±ÙˆØ´ Ø¨Ù‡ ØµÙˆØ±Øª 24 Ø³Ø§Ø¹ØªÙ‡ Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª
							</p>"
						>
							<div class="badge">
								<img src="assets/img/factory.png" />
							</div>
							<div class="label">Ú©Ø§Ø±Ø®Ø§Ù†Ù‡ Ø¬Ù…Ú©Ùˆ</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="hint">
			Ø§ÛŒÙ† Ù…ÙˆØ§Ø±Ø¯ ØªÙ†Ù‡Ø§ Ø¨Ø±Ø®ÛŒ Ø§Ø² Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ø§Ù‡Ù…ÛŒØª Ø¬Ù…Ú©Ùˆ Ù‡Ø³ØªÙ†Ø¯.
			<br />Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù†ØŒ Ø§Ø² Ø¨Ø®Ø´ Ø¨Ø§Ù„Ø§ÛŒ ØµÙØ­Ù‡ ØªÛŒÚ© Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† Ø±Ø§ ÙØ¹Ø§Ù„
			Ú©Ù†ÛŒØ¯.
		</div>

		<div class="copyright">Powered By Mirka.agencyğŸ’</div>

		<!-- popup root placed outside of the map viewport so its scrolling isn't
		     intercepted by map pan/zoom handlers -->
		<div id="popupRoot"></div>

		<script>
			const clamp = (v, a, b) => Math.max(a, Math.min(b, v));

			const mapInner = document.getElementById("mapInner");
			const mapImage = document.getElementById("mapImage");
			const viewport = document.getElementById("viewport");
			let state = {
				scale: 1,
				minScale: 0.5,
				maxScale: 1.5,
				translateX: 0,
				translateY: 0,
				dragging: false,
				lastMouse: { x: 0, y: 0 },
			};
			function updateTransform() {
				mapInner.style.transform = `translate(-50%,-50%) translate(${state.translateX}px, ${state.translateY}px) scale(${state.scale})`;
			}

			function positionMarkers() {
				const markers = mapInner.querySelectorAll(".marker");
				const rect = mapImage.getBoundingClientRect();
				const width = rect.width;
				const height = rect.height;
				markers.forEach((m) => {
					const dx = parseFloat(m.dataset.x) || 0;
					const dy = parseFloat(m.dataset.y) || 0;
					const left = (dx / 100) * width;
					const top = (dy / 100) * height;
					m.style.left = left + "px";
					m.style.top = top + "px";
				});
			}
			function onImageReady() {
				const rect = mapImage.getBoundingClientRect();
				mapInner.style.width = rect.width + "px";
				mapInner.style.height = rect.height + "px";
				positionMarkers();

				const initialScale = 0.4; // 1 = default display size; >1 zooms in, <1 zooms out
				state.scale = clamp(
					initialScale,
					state.minScale,
					state.maxScale
				);
				state.translateX = 0; // optional: center on map
				state.translateY = 0;
				updateTransform();
			}
			window.addEventListener("resize", onImageReady);
			if (mapImage.complete) onImageReady();
			else mapImage.addEventListener("load", onImageReady);

			viewport.addEventListener("mousedown", (e) => {
				if (e.button !== 0) return;
				state.dragging = true;
				state.lastMouse = { x: e.clientX, y: e.clientY };
				viewport.style.cursor = "grabbing";
			});
			window.addEventListener("mouseup", () => {
				state.dragging = false;
				viewport.style.cursor = "";
			});
			window.addEventListener("mousemove", (e) => {
				if (!state.dragging) return;
				const dx = e.clientX - state.lastMouse.x;
				const dy = e.clientY - state.lastMouse.y;
				state.lastMouse = { x: e.clientX, y: e.clientY };
				state.translateX += dx;
				state.translateY += dy;
				limitPan();
				updateTransform();
			});

			viewport.addEventListener(
				"wheel",
				(e) => {
					e.preventDefault();
					const delta = -e.deltaY * 0.0015;
					zoomAt(e.clientX, e.clientY, 1 + delta);
				},
				{ passive: false }
			);
			function zoomAt(clientX, clientY, zoomFactor) {
				const oldScale = state.scale;
				const newScale = clamp(
					oldScale * zoomFactor,
					state.minScale,
					state.maxScale
				);

				if (newScale === oldScale) return;

				// Map element rect (screen coords)
				const mapRect = mapInner.getBoundingClientRect();

				// offset of pointer inside map (screen px)
				const offsetX = clientX - mapRect.left;
				const offsetY = clientY - mapRect.top;

				// compute local (unscaled) coordinate of pointer relative to map image origin
				const localX = (offsetX - state.translateX) / oldScale;
				const localY = (offsetY - state.translateY) / oldScale;

				// compute new translate so newScale * local + newTranslate = offset
				state.translateX = offsetX - newScale * localX;
				state.translateY = offsetY - newScale * localY;

				state.scale = newScale;
				limitPan();
				updateTransform();
			}
			function limitPan() {
				const mapRect = mapInner.getBoundingClientRect();
				const vpRect = viewport.getBoundingClientRect();
				const scaledW = mapRect.width;
				const scaledH = mapRect.height;
				state.translateX = clamp(
					state.translateX,
					-scaledW * 2,
					scaledW * 2
				);
				state.translateY = clamp(
					state.translateY,
					-scaledH * 2,
					scaledH * 2
				);
			}

			document.getElementById("zoom-in").addEventListener("click", () => {
				const vp = viewport.getBoundingClientRect();
				zoomAt(vp.left + vp.width / 2, vp.top + vp.height / 2, 1.18);
			});
			document
				.getElementById("zoom-out")
				.addEventListener("click", () => {
					const vp = viewport.getBoundingClientRect();
					zoomAt(
						vp.left + vp.width / 2,
						vp.top + vp.height / 2,
						0.86
					);
				});

			// touch
			let lastTouchDist = null;
			let lastTouchCenter = null;
			viewport.addEventListener(
				"touchstart",
				(e) => {
					if (e.touches.length === 1) {
						state.dragging = true;
						state.lastMouse = {
							x: e.touches[0].clientX,
							y: e.touches[0].clientY,
						};
					} else if (e.touches.length === 2) {
						state.dragging = false;
						lastTouchDist = distance(e.touches[0], e.touches[1]);
						lastTouchCenter = centerPoint(
							e.touches[0],
							e.touches[1]
						);
					}
				},
				{ passive: true }
			);
			viewport.addEventListener(
				"touchmove",
				(e) => {
					if (e.touches.length === 1 && state.dragging) {
						const t = e.touches[0];
						const dx = t.clientX - state.lastMouse.x;
						const dy = t.clientY - state.lastMouse.y;
						state.lastMouse = { x: t.clientX, y: t.clientY };
						state.translateX += dx;
						state.translateY += dy;
						limitPan();
						updateTransform();
					} else if (e.touches.length === 2) {
						const d = distance(e.touches[0], e.touches[1]);
						const c = centerPoint(e.touches[0], e.touches[1]);
						if (lastTouchDist) {
							const factor = d / lastTouchDist;
							zoomAt(c.clientX, c.clientY, factor);
						}
						lastTouchDist = d;
						lastTouchCenter = c;
					}
				},
				{ passive: false }
			);
			viewport.addEventListener(
				"touchend",
				(e) => {
					if (e.touches.length === 0) {
						state.dragging = false;
						lastTouchDist = null;
						lastTouchCenter = null;
					}
				},
				{ passive: true }
			);
			function distance(a, b) {
				return Math.hypot(a.clientX - b.clientX, a.clientY - b.clientY);
			}
			function centerPoint(a, b) {
				return {
					clientX: (a.clientX + b.clientX) / 2,
					clientY: (a.clientY + b.clientY) / 2,
				};
			}

			// popup + sounds
			const popupRoot = document.getElementById("popupRoot");
			const clickAudio = document.getElementById("clickAudio");
			const bgAudio = document.getElementById("bgAudio");
			const audioToggle = document.getElementById("audioToggle");
			let bgPlaying = false;

			// toggle background audio (user interaction required in many browsers)
			audioToggle.addEventListener("click", () => {
				if (!bgPlaying) {
					// try to play
					bgAudio
						.play()
						.then(() => {
							bgPlaying = true;
							audioToggle.textContent = "â¸";
						})
						.catch(() => {
							audioToggle.textContent = "â–¶";
							alert(
								"Browser blocked autoplay. Interact with the page (click) and try again."
							);
						});
				} else {
					bgAudio.pause();
					bgPlaying = false;
					audioToggle.textContent = "â–¶";
				}
			});

			mapInner.addEventListener("click", (e) => {
				const marker = e.target.closest(".marker");
				if (!marker) return;
				e.stopPropagation();
				openPopupFor(marker);
			});
			window.addEventListener("click", () => {
				/* clicking outside closes popup */ if (
					!popupRoot.querySelector(".popup-full-backdrop")
				)
					return;
				closePopup();
			});

			function openPopupFor(marker) {
				closePopup();
				// play click/open sound if available
				try {
					clickAudio.currentTime = 0;
					clickAudio.play().catch(() => {});
				} catch (e) {}

				const id = marker.dataset.id || "unknown";
				const title =
					(marker.querySelector(".label") || {}).textContent || id;
				const imageSrc = marker.dataset.image || "";
				const desc = marker.dataset.desc || "Ø¨Ø¯ÙˆÙ† ØªÙˆØ¶ÛŒØ­Ø§Øª";

				const html = `
        <div class="popup-full-backdrop popup-animate" data-marker="${id}">
          <div class="popup-full">
            <div class="popup-left">
              ${
					imageSrc
						? `<img src="${imageSrc}" alt="${title}">`
						: `<div style="color:var(--muted);text-align:center;padding:22px;">Ø¨Ø¯ÙˆÙ† ØªØµÙˆÛŒØ±</div>`
				}
            </div>
            <div class="popup-right">
              <div class="close" id="popupClose">âœ•</div>
              <h2>${title}</h2>
              <p>${desc}</p>
             <!-- <div class="popup-actions">
                <button class="btn" id="action1">View Gallery</button>
                <button class="btn" id="action2">Contact</button>
              </div>-->
            </div>
          </div>
        </div>
      `;

				popupRoot.innerHTML = html;
				const backdrop = popupRoot.querySelector(
					".popup-full-backdrop"
				);
				// prevent event trickle closing when clicking inside
				backdrop.addEventListener("click", (ev) => {
					if (ev.target === backdrop) closePopup();
				});
				const closeBtn = popupRoot.querySelector("#popupClose");
				if (closeBtn)
					closeBtn.addEventListener("click", (ev) => {
						ev.stopPropagation();
						closePopup();
					});

				// Prevent map pan/zoom while interacting with popup scroll area
				const popupRight = popupRoot.querySelector(".popup-right");
				if (popupRight) {
					// stop wheel events from reaching the viewport/map
					popupRight.addEventListener(
						"wheel",
						(ev) => {
							ev.stopPropagation();
						},
						{ passive: false }
					);

					// for touch devices, stop touchmove propagation when touching the popup
					popupRight.addEventListener(
						"touchstart",
						(ev) => {
							ev.stopPropagation();
						},
						{ passive: true }
					);
					popupRight.addEventListener(
						"touchmove",
						(ev) => {
							ev.stopPropagation();
						},
						{ passive: false }
					);
				}

				// animate transform for map to focus on marker (optional subtle zoom)
				// play an extra short flourish sound if desired (re-using clickAudio)
			}
			function closePopup() {
				popupRoot.innerHTML = "";
			}

			// toggles
			const projectsCheckbox =
				document.getElementById("projects-checkbox");
			const salesCheckbox = document.getElementById("sales-checkbox");
			function applyToggles() {
				const markers = mapInner.querySelectorAll(".marker");
				markers.forEach((m) => {
					const g = m.dataset.group || "";
					if (g === "projects")
						m.style.display = projectsCheckbox.checked
							? "flex"
							: "none";
					if (g === "sales")
						m.style.display = salesCheckbox.checked
							? "flex"
							: "none";
				});
			}
			projectsCheckbox.addEventListener("change", applyToggles);
			salesCheckbox.addEventListener("change", applyToggles);
			salesCheckbox.checked = false;
			applyToggles();

			let ro = new ResizeObserver(() => {
				onImageReady();
			});
			ro.observe(mapImage);

			(function starfield() {
				const c = document.getElementById("stars");
				const ctx = c.getContext("2d");
				let w,
					h,
					stars = [];
				function resize() {
					w = innerWidth;
					h = innerHeight;
					c.width = w;
					c.height = h;
					init();
				}
				function init() {
					stars = [];
					for (let i = 0; i < 120; i++) {
						stars.push({
							x: Math.random() * w,
							y: Math.random() * h,
							r: Math.random() * 1.6 + 0.2,
							a: Math.random() * 0.9,
						});
					}
				}
				function draw() {
					ctx.clearRect(0, 0, w, h);
					for (const s of stars) {
						ctx.globalAlpha = s.a;
						ctx.beginPath();
						ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
						ctx.fillStyle = "#8ab6ff";
						ctx.fill();
					}
				}
				window.addEventListener("resize", resize);
				resize();
				function loop() {
					for (const s of stars) {
						s.x += (Math.random() - 0.5) * 0.4;
						s.y += (Math.random() - 0.5) * 0.4;
						s.a = 0.6 + Math.sin(Date.now() / 1000 + s.x) * 0.3;
					}
					draw();
					requestAnimationFrame(loop);
				}
				loop();
			})();

			window.addMarker = function (opts) {
				const el = document.createElement("div");
				el.className = "marker";
				el.dataset.id = opts.id || "m" + Date.now();
				el.dataset.x = opts.x || 0;
				el.dataset.y = opts.y || 0;
				el.dataset.group = opts.group || "projects";
				if (opts.type) el.dataset.type = opts.type;
				if (opts.image) el.dataset.image = opts.image;
				if (opts.desc) el.dataset.desc = opts.desc;
				el.innerHTML = `<div class="badge">${(
					opts.label ||
					opts.id ||
					"M"
				).slice(0, 2)}</div><div class="label">${
					opts.label || opts.id
				}</div>`;
				mapInner.appendChild(el);
				onImageReady();
				applyToggles();
				return el;
			};

			window.addEventListener("keydown", (e) => {
				if (e.key === "+") document.getElementById("zoom-in").click();
				if (e.key === "-") document.getElementById("zoom-out").click();
			});
		</script>
	</body>
</html>
