<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>ุฌูฺฉู ุจุฑ ุฑู ููุดู</title>
		<link
			href="assets/fonts/vazirmatn-v33.003/Vazirmatn-Variable-font-face.css"
			rel="stylesheet"
		/>
		<link rel="icon" href="assets/img/fav.png" sizes="192x192" />
		<style>
			:root {
				--bg: #071022; /* dark deep */
				--panel: #0f1724cc;
				--accent: #6ee7b7;
				--accent-2: #7c5cff;
				--muted: #9aa8b2;
				--glass: rgba(255, 255, 255, 0.04);
				--neon: 0 0 16px rgba(124, 92, 255, 0.22),
					0 0 40px rgba(110, 231, 183, 0.06);
				--ui-size: 56px;
			}
			/* Target the scrollbar */
			::-webkit-scrollbar {
				width: 6px;
				height: 6px;
			}

			/* Track (background) */
			::-webkit-scrollbar-track {
				background: var(--bg);
				border-radius: 6px;
			}

			/* Handle (thumb) */
			::-webkit-scrollbar-thumb {
				background: #243a5ecc;
				border-radius: 6px;
			}

			/* Handle on hover */
			::-webkit-scrollbar-thumb:hover {
				background: #243a5ecc;
			}

			html,
			body {
				height: 100%;
				margin: 0;
				font-family: "Vazirmatn", ui-sans-serif, system-ui,
					-apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
			}
			body {
				background: radial-gradient(
						circle at 10% 10%,
						rgba(124, 92, 255, 0.06),
						transparent 10%
					),
					linear-gradient(180deg, #04101a 0%, var(--bg) 60%);
				color: #dfe9f2;
				overflow: hidden;
			}

			#stars {
				position: fixed;
				left: 0;
				top: 0;
				right: 0;
				bottom: 0;
				pointer-events: none;
				mix-blend-mode: screen;
				opacity: 0.5;
			}

			.app {
				height: 100%;
				display: grid;
				grid-template-columns: 1fr;
				align-items: center;
				justify-items: center;
				padding: 28px;
			}

			.controls {
				position: fixed;
				right: 22px;
				top: 22px;
				display: flex;
				flex-direction: column;
				gap: 12px;
				z-index: 60;
			}
			.toggle-group {
				display: flex;
				flex-direction: column;
				gap: 10px;
				align-items: flex-end;
			}

			.btn {
				width: var(--ui-size);
				height: var(--ui-size);
				display: inline-grid;
				place-items: center;
				border-radius: 12px;
				background-color: #eee;
				backdrop-filter: blur(6px);
				box-shadow: var(--neon);
				border: 1px solid rgba(255, 255, 255, 0.04);
				cursor: pointer;
			}
			.btn svg {
				width: 22px;
				height: 22px;
				opacity: 0.95;
			}
			.btn:active {
				transform: translateY(2px) scale(0.99);
			}
			.group-toggle {
				/* padding: 8px 12px; */
				border-radius: 999px;
				background: linear-gradient(
					90deg,
					rgba(255, 255, 255, 0.02),
					rgba(255, 255, 255, 0.01)
				);
				border: 1px solid rgba(255, 255, 255, 0.03);
				display: flex;
				gap: 8px;
				align-items: center;
			}

			.viewport {
				width: 100%;
				max-width: 75vw;
				height: 78vh;
				background: linear-gradient(
					180deg,
					rgba(12, 20, 30, 0.35),
					rgba(6, 10, 14, 0.4)
				);
				border-radius: 18px;
				padding: 18px;
				box-shadow: 0 10px 40px rgba(2, 6, 12, 0.6);
				position: relative;
				overflow: hidden;
				border: 10px solid #224;
			}

			.map-frame {
				position: absolute;
				inset: 0;
				border-radius: 12px;
				overflow: hidden;
				background: linear-gradient(
					180deg,
					rgba(0, 0, 0, 0.12),
					rgba(0, 0, 0, 0.18)
				);
			}
			.map-inner {
				position: absolute;
				left: 50%;
				top: 50%;
				transform-origin: 0 0;
				/* will-change: transform; */
				touch-action: none;
			}

			/* navy-blue tint overlay applied over the map image */
			.map-inner::before {
				content: "";
				position: absolute;
				inset: 0;
				pointer-events: none;
				z-index: 10; /* behind markers (markers have z-index:40) */
			}

			.map-img {
				display: block;
				max-width: none;
				user-select: none;
				pointer-events: none;

				position: relative;
				z-index: 0;
			}

			.marker {
				position: absolute;
				transform: translate(-50%, -50%);
				display: flex;
				flex-direction: column;
				align-items: center;
				gap: 15px;
				cursor: pointer;
				transition: transform 0.18s cubic-bezier(0.16, 0.8, 0.3, 1),
					filter 0.18s;
				z-index: 40;
			}
			.marker .badge {
				width: 85px;
				height: 85px;
				/* 	border-radius: 12px; */
				display: grid;
				place-items: center;
				/* 	background: linear-gradient(
					180deg,
					var(--accent),
					var(--accent-2)
				); */
				/* 	box-shadow: 0 6px 22px rgba(0, 0, 0, 0.45);
				border: 1px solid rgba(255, 255, 255, 0.06); */
				font-weight: 700;
				color: #041022;
			}
			.marker .badge img {
				width: 100%;
				height: 100%;
			}
			.marker[data-group="sales"] .badge {
				/* background: linear-gradient(180deg, #ffd166, #ff8a5b); */
			}
			.marker[data-type="office"] .badge {
				/* 	background: linear-gradient(180deg, #8ef3ff, #49c2ff);
				border-radius: 50%; */
			}
			.marker[data-type="factory"] .badge {
				/* 	background: linear-gradient(180deg, #ff9ac2, #ff5e9e);
				border-radius: 50%; */
			}
			.marker:hover {
				transform: translate(-50%, -50%) scale(1.12);
			}
			.marker .label {
				font-size: 1.3rem;
				background: var(--panel);
				padding: 6px 9px;
				border-radius: 8px;
				border: 1px solid rgba(255, 255, 255, 0.03);
				/* backdrop-filter: blur(6px); */
				white-space: nowrap;
			}

			/* popup: semi full-screen */
			.popup-full-backdrop {
				position: fixed;
				inset: 0;
				background: linear-gradient(
					180deg,
					rgba(2, 6, 12, 0.6),
					rgba(2, 6, 12, 0.8)
				);
				backdrop-filter: blur(6px);
				z-index: 120;
				display: flex;
				align-items: center;
				justify-content: center;
			}
			.popup-full {
				width: 92vw;
				max-width: 1200px;
				height: 86vh;
				border-radius: 14px;
				background: linear-gradient(
					180deg,
					rgba(8, 12, 18, 0.98),
					rgba(6, 8, 12, 0.98)
				);
				box-shadow: 0 30px 80px rgba(2, 6, 12, 0.75);
				border: 1px solid rgba(255, 255, 255, 0.04);
				display: flex;
				overflow: hidden;
				position: relative;
			}
			.popup-left {
				flex: 0 0 42%;
				min-width: 320px;
				background: linear-gradient(
					180deg,
					rgba(255, 255, 255, 0.02),
					rgba(255, 255, 255, 0.01)
				);
				display: flex;
				align-items: center;
				justify-content: center;
			}
			.popup-left img {
				max-width: 100%;
				max-height: 100%;
				height: 100%;
				width: 100%;
				object-fit: cover;
				border-radius: 8px 0 0 8px;
				box-shadow: 0 14px 40px rgba(0, 0, 0, 0.6);
			}
			.popup-right {
				flex: 1;
				padding: 22px 26px;
				overflow: auto;
				direction: rtl;
			}
			.popup-right h2 {
				margin: 0 0 8px 0;
				font-size: 20px;
			}
			.popup-right p {
				color: var(--muted);
				line-height: 1.5;
			}
			.popup-actions {
				margin-top: 16px;
				display: flex;
				gap: 10px;
			}
			.close {
				width: 36px;
				height: 36px;
				border-radius: 8px;
				display: grid;
				place-items: center;
				cursor: pointer !important;
			}

			.legend {
				position: fixed;
				left: 22px;
				top: 22px;
				background: var(--panel);
				padding: 10px;
				border-radius: 12px;
				border: 1px solid rgba(255, 255, 255, 0.03);
				backdrop-filter: blur(6px);
				z-index: 60;
			}
			.legend h3 {
				margin: 0 0 8px 0;
				font-size: 13px;
			}

			.hint {
				direction: rtl;
				position: fixed;
				right: 22px;
				bottom: 22px;
				background: linear-gradient(
					90deg,
					rgba(255, 255, 255, 0.02),
					rgba(255, 255, 255, 0.01)
				);
				padding: 10px;
				border-radius: 12px;
				border: 1px solid rgba(255, 255, 255, 0.03);
				font-size: 13px;
			}

			.copyright {
				direction: ltr;
				position: fixed;
				left: 22px;
				bottom: 22px;
				background: linear-gradient(
					90deg,
					rgba(255, 255, 255, 0.02),
					rgba(255, 255, 255, 0.01)
				);
				padding: 10px;
				border-radius: 12px;
				border: 1px solid rgba(255, 255, 255, 0.03);
				font-size: 13px;
			}
			@media (max-width: 900px) {
				:root {
					--ui-size: 48px;
				}
				.viewport {
					height: 72vh;
				}
			}
			@media (max-width: 560px) {
				.marker .badge {
					width: 40px;
					height: 40px;
				}
				.marker .label {
					display: none;
				}
				.popup-left {
					display: none;
				}
				.popup-full {
					width: 96vw;
					height: 86vh;
				}
			}

			@keyframes popupIn {
				0% {
					opacity: 0;
					transform: translateY(10px) scale(0.99);
				}
				100% {
					opacity: 1;
					transform: translateY(0) scale(1);
				}
			}
			.popup-animate {
				animation: popupIn 0.32s cubic-bezier(0.22, 0.9, 0.2, 1);
			}

			@keyframes pulse {
				0% {
					transform: scale(0.9);
				}
				50% {
					transform: scale(1.06);
				}
				100% {
					transform: scale(0.9);
				}
			}
			.pulse {
				animation: pulse 3s ease-in-out infinite;
			}

			.titlebar {
				text-align: right;
				position: fixed;
				left: 50%;
				transform: translateX(-50%);
				top: 14px;
				z-index: 70;
				padding: 10px 18px;
				border-radius: 999px;
				background: linear-gradient(
					90deg,
					rgba(255, 255, 255, 0.02),
					rgba(255, 255, 255, 0.01)
				);
				border: 1px solid rgba(255, 255, 255, 0.03);
				backdrop-filter: blur(6px);
				display: flex;
				gap: 14px;
				align-items: center;
			}
			.titlebar h1 {
				margin: 0;
				font-size: 16px;
				letter-spacing: 0.6px;
			}
			.titlebar small {
				display: block;
				font-size: 12px;
				color: var(--muted);
			}
			.audio-toggle {
				display: inline-grid;
				place-items: center;
				width: 36px;
				height: 36px;
				border-radius: 8px;
				background: rgba(255, 255, 255, 0.02);
				border: 1px solid rgba(255, 255, 255, 0.03);
				cursor: pointer;
			}

			.sales-popup-item {
				background-color: rgba(185, 185, 225, 0.2);
				padding: 12px;
				border-radius: 12px;
				margin-bottom: 12px;
			}

			.sales-popup-item h4 {
				font-size: 1.4rem;
				font-weight: bold;
			}

			iframe {
				border-radius: 15px;
			}

			.inline-popup-image {
				width: 100%;
				object-fit: contain;
				margin: 12px;
				border-radius: 12px;
			}
		</style>

		<link rel="preload" as="image" href="assets/img/sales/kerman.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/mashhad.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/hamedan.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/isfahan.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/khozestan.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/kurdistan.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/qazvin.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/tabriz.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/tehran.jpg" />
		<link rel="preload" as="image" href="assets/img/sales/zanjan.jpg" />
	</head>
	<body>
		<canvas id="stars"></canvas>

		<!-- Audio elements (replace src with your files) -->
		<audio id="bgAudio" loop autoplay preload="auto">
			<!-- Provide your background music file here (mp3/ogg). Autoplay may be blocked until user interacts. -->
			<source src="assets/audio/bg.mp3" type="audio/mpeg" />
		</audio>
		<audio id="clickAudio" preload="auto">
			<!-- Provide your click/open sound here -->
			<source src="assets/audio/tap.mp3" type="audio/mpeg" />
		</audio>

		<div class="titlebar">
			<div style="display: flex; flex-direction: column">
				<h1>ุดุฑฺฉุช ุฌูฺฉู ู ุฑุงูฺฉุงุฑ ูุง ูููุงุฏ ู ูุนุฏู</h1>
				<small>ููุฏูฺฏ ุตูุงุน ูุนุฏู ฺฉุงูู ูพุงุฑุณ </small>
			</div>
			<div style="width: 18px"></div>
			<div
				title="Toggle background audio"
				id="audioToggle"
				class="audio-toggle"
			>
				โถ
			</div>
		</div>

		<div class="legend">
			<img src="assets/img/jemco-white.png" style="width: 120px" />
			<div style="display: none">
				<h3>Legend</h3>
				<div style="display: flex; gap: 8px; align-items: center">
					<div
						style="
							width: 14px;
							height: 14px;
							border-radius: 4px;
							background: linear-gradient(
								180deg,
								var(--accent),
								var(--accent-2)
							);
						"
					></div>
					<div style="font-size: 13px">Project</div>
				</div>
				<div
					style="
						display: flex;
						gap: 8px;
						align-items: center;
						margin-top: 6px;
					"
				>
					<div
						style="
							width: 14px;
							height: 14px;
							border-radius: 50%;
							background: linear-gradient(
								180deg,
								#8ef3ff,
								#49c2ff
							);
						"
					></div>
					<div style="font-size: 13px">Office</div>
				</div>
				<div
					style="
						display: flex;
						gap: 8px;
						align-items: center;
						margin-top: 6px;
					"
				>
					<div
						style="
							width: 14px;
							height: 14px;
							border-radius: 50%;
							background: linear-gradient(
								180deg,
								#ff9ac2,
								#ff5e9e
							);
						"
					></div>
					<div style="font-size: 13px">Factory</div>
				</div>
			</div>
		</div>

		<div class="controls">
			<div class="toggle-group">
				<div class="group-toggle" id="projects-toggle">
					<label for="projects-checkbox">ูพุฑูฺู ูุง ุฌูฺฉู</label>
					<input
						type="checkbox"
						id="projects-checkbox"
						name="projects-checkbox"
						checked
						style="accent-color: var(--accent); margin-right: 6px"
					/>
				</div>
				<div class="group-toggle" id="sales-toggle">
					<label for="sales-checkbox">ููุงูุฏฺฏุงู ูุฑูุด</label>
					<input
						type="checkbox"
						id="sales-checkbox"
						name="sales-checkbox"
						checked
						style="accent-color: #ff8a5b; margin-right: 6px"
					/>
				</div>
			</div>
			<div style="height: 8px"></div>
			<div
				style="
					display: flex;
					flex-direction: column;
					gap: 8px;
					align-items: end;
				"
			>
				<button class="btn" id="zoom-in" title="Zoom in">
					<svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="1.6"
							d="M12 5v14M5 12h14"
						/>
					</svg>
				</button>
				<button class="btn" id="zoom-out" title="Zoom out">
					<svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="1.6"
							d="M5 12h14"
						/>
					</svg>
				</button>
			</div>
		</div>

		<div class="app">
			<div class="viewport" id="viewport">
				<div class="map-frame">
					<div
						class="map-inner"
						id="mapInner"
						style="
							left: 50%;
							top: 50%;
							transform: translate(-50%, -50%) scale(1)
								translate(0px, 0px);
						"
					>
						<img
							src="assets/img/map.png"
							alt="map"
							class="map-img"
							id="mapImage"
						/>

						<div
							class="marker"
							data-id="p2"
							data-group="projects"
							data-x="85"
							data-y="102"
							data-image=""
						>
							<div class="badge">
								<img src="assets/img/projects/msc.png" />
							</div>
							<div class="label">ูููุงุฏ ูุจุงุฑฺฉู</div>
						</div>

						<div
							class="marker"
							data-id="p2"
							data-group="projects"
							data-x="110"
							data-y="135"
							data-image=""
						>
							<div class="badge">
								<img src="assets/img/pin.png" />
							</div>
							<div class="label">ุดุฑฺฉุช ูุนุฏู ู ุตูุนุช ฺฏู ฺฏูุฑ</div>
						</div>

						<div
							class="marker"
							data-id="p2"
							data-group="projects"
							data-x="93"
							data-y="140"
							data-image=""
						>
							<div class="badge">
								<img src="assets/img/pin.png" />
							</div>
							<div class="label">ุฐูุจ ุขูู ูพุงุณุงุฑฺฏุงุฏ</div>
						</div>

						<div
							class="marker"
							data-id="p2"
							data-group="projects"
							data-x="116"
							data-y="127"
							data-image=""
						>
							<div class="badge">
								<img src="assets/img/pin.png" />
							</div>
							<div class="label">ูููุงุฏ ุณุฑุฌุงู</div>
						</div>

						<div
							class="marker"
							data-id="p2"
							data-group="projects"
							data-x="107"
							data-y="123"
							data-image=""
						>
							<div class="badge">
								<img src="assets/img/pin.png" />
							</div>
							<div class="label">ูุฌุชูุน ูุณ ูุฏูฺฉ</div>
						</div>

						<div
							class="marker"
							data-id="p2"
							data-group="projects"
							data-x="84"
							data-y="88"
							data-image=""
						>
							<div class="badge">
								<img src="assets/img/pin.png" />
							</div>
							<div class="label">ูููุงุฏ ุบุฑุจ ุขุณุง</div>
						</div>

						<div
							class="marker"
							data-id="p2"
							data-group="projects"
							data-x="70"
							data-y="120"
							data-image=""
						>
							<div class="badge">
								<img src="assets/img/pin.png" />
							</div>
							<div class="label">ูููุงุฏ ุฎูุฒุณุชุงู</div>
						</div>

						<div
							class="marker"
							data-id="p2"
							data-group="projects"
							data-x="116"
							data-y="66"
							data-image=""
						>
							<div class="badge">
								<img src="assets/img/pin.png" />
							</div>
							<div class="label">ูููุงุฏ ุณุจุฒูุงุฑ</div>
						</div>

						<div
							class="marker"
							data-id="p2"
							data-group="projects"
							data-x="124"
							data-y="85"
							data-image=""
						>
							<div class="badge">
								<img src="assets/img/pin.png" />
							</div>
							<div class="label">ุณูุงู ุณุจุฒูุงุฑ</div>
						</div>

						<div
							class="marker"
							data-id="p2"
							data-group="projects"
							data-x="126"
							data-y="70"
							data-image=""
						>
							<div class="badge">
								<img src="assets/img/pin.png" />
							</div>
							<div class="label">ูููุงุฏ ูุดุงุจูุฑ</div>
						</div>

						<div
							class="marker"
							data-id="p2"
							data-group="projects"
							data-x="99"
							data-y="75"
							data-image=""
						>
							<div class="badge">
								<img src="assets/img/pin.png" />
							</div>
							<div class="label">ุณูุงู ูุฑุงุฒ ูุฑูุฒฺฉูู</div>
						</div>

						<div
							class="marker"
							data-id="p2"
							data-group="projects"
							data-x="140"
							data-y="95"
							data-image=""
						>
							<div class="badge">
								<img src="assets/img/pin.png" />
							</div>
							<div class="label">ุณูุงู ุบูุฑ ุงูุบุงูุณุชุงู</div>
						</div>

						<div
							class="marker"
							data-id="p2"
							data-group="projects"
							data-x="126"
							data-y="55"
							data-image=""
						>
							<div class="badge">
								<img src="assets/img/pin.png" />
							</div>
							<div class="label">ุณูุงู ุชุฑฺฉููุณุชุงู</div>
						</div>
						<!--Start Sales-->

						<div
							class="marker"
							data-id="s1"
							data-desc="
							<div class='sales-popup-item'>
							<h4>ฺฉุงูุง ุตูุนุช</h4>
<b>ุดูุงุฑู ุชููู:</b>
02191304300
<br/>
<b>ุงูู:</b>
info@kalasanati.com
<br/>
<b>ูุจุณุงุช:</b>
www.kalasanati.com<br/>
<b>ุขุฏุฑุณ: </b>
ุงุณุชุงู ุฎุฑุงุณุงู ุฑุถูุ ูุดูุฏุ ุจููุงุฑ ุฑุงุถุ ุฑุงุถ ตฑ/ฒุ ุณุงุฎุชูุงู ฺฉูุงโุตูุนุชุ ุฎุงุจุงู ุณุฏุ ุงุฑุงู
							</div><div class='sales-popup-item'>
	<h4>ุฌูุงู ูพุงุฑุช</h4>
<b>ุดูุงุฑู ุชููู:</b>
05133446135
<br/>
<b>ุขุฏุฑุณ:</b>
ูุดูุฏ- ุจููุงุฑ ูุฑูุฏฺฏุงู -ููุงุจู ูพููพ ุจูุฒู-ูพูุงฺฉ 242-ฺฉุฏ ูพุณุช 9165616413
							</div><div class='sales-popup-item'>
	<h4>ุดุฑฺฉุช ุขุจ ููุฒ ูพููพ ุดุฑู</h4>
<b>ุดูุงุฑู ุชููู:</b>
05138665598
<br/>
<b>ุขุฏุฑุณ: </b>
ูุดูุฏ-ุจููุงุฑูฺฉู ุขุจุงุฏ - ูุจุด ูฺฉู ุขุจุงุฏ34- ูพูุงฺฉ842-ูุฏูพุณุช: 9178875669
							</div>

							<div class='sales-popup-item'>
	<h4>ุดุฑฺฉุช ุขุจ ููุฒ ูพููพ ุดุฑู</h4>
<b>ุดูุงุฑู ุชููู:</b>
05138665598
<br/>
<b>ุขุฏุฑุณ: </b>
ูุดูุฏ-ุจููุงุฑูฺฉู ุขุจุงุฏ - ูุจุด ูฺฉู ุขุจุงุฏ34- ูพูุงฺฉ842-ูุฏูพุณุช: 9178875669
							</div>

							<div class='sales-popup-item'>
	<h4>ุดุฑฺฉุช ุขุจ ููุฒ ูพููพ ุดุฑู</h4>
<b>ุดูุงุฑู ุชููู:</b>
05138665598
<br/>
<b>ุขุฏุฑุณ: </b>
ูุดูุฏ-ุจููุงุฑูฺฉู ุขุจุงุฏ - ูุจุด ูฺฉู ุขุจุงุฏ34- ูพูุงฺฉ842-ูุฏูพุณุช: 9178875669
							</div>
"
							data-image="assets/img/sales/mashhad.jpg"
							data-group="sales"
							data-x="132"
							data-y="76"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">ููุงูุฏฺฏุงู ูุดูุฏ</div>
						</div>

						<div
							class="marker"
							data-id="s2"
							data-desc="
							
							<div class='sales-popup-item'>
<h4>ุดุฑฺฉุช ุนูุฑุงู ุขุจ ุจุงุจฺฉุงู</h4>
<b>ุดูุงุฑู ุชููู:</b>
03432132961
<br/>
<b>ุขุฏุฑุณ: </b>ฺฉุฑูุงู- ุจููุงุฑุขุช ุง...ุตุฏูู(ุฌุงุฏู ุชูุฑุงู)ุฑูุจุฑู ุดุฑฺฉุช ุฐุบุงูุณูฺฏ-ูุจุด ุจููุงุฑููุดูฺฏ ูุฑุงุฏ-ูุฏูพุณุช7618844344<br/>
							</div>
							
"
							data-image="assets/img/sales/kerman.jpg"
							data-group="sales"
							data-x="115"
							data-y="116"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">ููุงูุฏฺฏุงู ฺฉุฑูุงู</div>
						</div>

						<div
							class="marker"
							data-id="s3"
							data-desc="
							
							<div class='sales-popup-item'>
<h4>ุฏุฑูฺฉุง ุฒุงฺฏุฑุณ ุตูุนุช ุตูุงูุงู</h4>
<b>ุดูุงุฑู ุชููู:</b>
03142325000
<br/>
<b>ุขุฏุฑุณ: </b>ุงุตููุงู-ุฌุงุฏู ูุฌู ุขุจุงุฏ ฺฏูุฏุดุช-ุจููุงุฑูพฺููุด-ุฑูุจุฑู ุจูุงุฑุณุชุงู ุชูุงู ุจุฎุด ูุฏุฑุณ-ุชูุงุทุน ุงูู-ูพูุงฺฉ 40<br/>
							</div>

							<div class='sales-popup-item'>
<h4>ุดุฑฺฉุช ุณุงูุงู ุขุจุงุฑ</h4>
<b>ุดูุงุฑู ุชููู:</b>
0313137122
<br/>
<b>ุขุฏุฑุณ: </b>ุงุตููุงู - ุงูุงู ุฎูู -ุจุนุฏ ุงุฒ ฺูุงุฑ ุฑุงู ุงูุงู ุฑุถุง -ุฑูุจุฑู ุฎุงุจุงู ุดูุฏุงู ููุฏ ูพูุฑ-ูุจุด ฺฉูฺู 98<br/>
							</div>
							
"
							data-image="assets/img/sales/isfahan.jpg"
							data-group="sales"
							data-x="92"
							data-y="100"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">ููุงูุฏฺฏุงู ุงุตููุงู</div>
						</div>

						<div
							class="marker"
							data-id="s4"
							data-desc="
							
							<div class='sales-popup-item'>
<h4>ุดุฑฺฉุช ุฏฺุขุจ ุฎูุฒุณุชุงู</h4>
<b>ุดูุงุฑู ุชููู:</b>
06142221527
<br/>
<b>ุขุฏุฑุณ: </b>ุงููุงุฒ-ุฎ ุขุฒุงุฏฺฏุงู(24 ูุชุฑู ูุฏูู)-ูุจุด ุฑุณุชฺฏุงุฑู -ูพ493-ุท1-ูุฏูพุณุช6193663395
<br/>
</div>

							
							
"
							data-image="assets/img/sales/khozestan.jpg"
							data-group="sales"
							data-x="74"
							data-y="110"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">ููุงูุฏฺฏุงู ุฎูุฒุณุชุงู</div>
						</div>

						<div
							class="marker"
							data-id="s5"
							data-desc="
							
							<div class='sales-popup-item'>
<h4>ุดุฑฺฉุช ุชููุจู ููุชูุฑ ุบุฑุจ
</h4>
<b>ุดูุงุฑู ุชููู:</b>
08132671415
<br/>
<b>ุขุฏุฑุณ: </b>ููุฏุงู- ุฎ 17 ุดูุฑูุฑ-ุฌูุจ ุจุงุฑุจุฑ ุงูููุฏ-ูุฏ6513698539
<br/>
</div>

							
							
"
							data-image="assets/img/sales/hamedan.jpg"
							data-group="sales"
							data-x="70"
							data-y="88"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">ููุงูุฏฺฏุงู ููุฏุงู</div>
						</div>

						<div
							class="marker"
							data-id="s5"
							data-desc="
							
							<div class='sales-popup-item'>
<h4>ุดุฑฺฉุช ุงูุฏุดู ููู ุขุจ ุขูุงู
</h4>
<b>ุดูุงุฑู ุชููู:</b>
02833685755
<br/>
<b>ุขุฏุฑุณ: </b>ูุฒูู- ุฎุงุจุงู ููุฑุฒุงู -ุจู ุญฺฉูุช 18 ู 20 - ูพูุงฺฉ 138- ูุงุญุฏ 7
<br/>
</div>

							
							
"
							data-image="assets/img/sales/qazvin.jpg"
							data-group="sales"
							data-x="76"
							data-y="75"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">ููุงูุฏฺฏุงู ูุฒูู</div>
						</div>

						<div
							class="marker"
							data-id="s5"
							data-desc="
							
	<div class='sales-popup-item'>
<h4>ูุฑูุดฺฏุงู ุณููุชู
</h4>
<b>ุดูุงุฑู ุชููู:</b>
02433363541 , 09981147217
<br/>
<b>ุงูู:</b> seventozanjan@gmail.com
<br/>
<b>ุขุฏุฑุณ: </b>ุฒูุฌุงู - ุฎุงุจุงู ููุช ุชุฑ - ูุจุด ฺฉูฺู ฺฉุฑู ุงูุตุงุฑ ู ูพูุงฺฉ 1.105
<br/>
</div>


							<div class='sales-popup-item'>
<h4>ูุฑูุดฺฏุงู ูพุดุฑูุตูุนุช ุตุฏุฑ ุฌูุงู
</h4>
<b>ุดูุงุฑู ุชููู:</b>
02433321051
<br/>
<b>ุขุฏุฑุณ: </b>ุฒูุฌุงู-ุฎ ุตุฏุฑ ุฌูุงู-ุฑูุจุฑู ูพุงุฑฺฉูฺฏ ุงูุงูุฒุงุฏู - ุฌูุจ ูุณุงูุฑุฎุงูู ุทุงุฑู- ูพ 267ูุฏ4516653158
<br/>
</div>

							
							
"
							data-image="assets/img/sales/zanjan.jpg"
							data-group="sales"
							data-x="68"
							data-y="70"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">ููุงูุฏฺฏุงู ุฒูุฌุงู</div>
						</div>

						<div
							class="marker"
							data-id="s5"
							data-desc="
							
	


							<div class='sales-popup-item'>
<h4>ุดุฑฺฉุช ูููุฏุณ ุจุฑู ุขุฑุงู ูุฑุฏ
</h4>
<b>ุดูุงุฑู ุชููู:</b>
08733167155
<br/>
<b>ุขุฏุฑุณ: </b>ุณููุฏุฌ-ุฎุงุจุงู ุทุงููุงู-ุฑูุจุฑู ูพููพ ุจูุฒู ฺฉุฏูพุณุช 6614683898
<br/>
</div>

							
							
"
							data-image="assets/img/sales/kurdistan.jpg"
							data-group="sales"
							data-x="62"
							data-y="78"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">ููุงูุฏฺฏุงู ฺฉุฑุฏุณุชุงู</div>
						</div>

						<div
							class="marker"
							data-id="s5"
							data-desc="
							
	


							<div class='sales-popup-item'>
<h4>ุดุฑฺฉุช ุชููุจู ุณุงุฒุงู ุชุจุฑูุฒ
</h4>
<b>ุดูุงุฑู ุชููู:</b>
04134445277
<br/>
<b>ุขุฏุฑุณ: </b>ุชุจุฑูุฒ-ุฎ ุฑุณุงูุช- ุฑูุจุฑูู ูุฌุชูุน ฺฏูุณุชุงู-ุฌูุจ ููู ูุญุฏุช-ูพ62-ูุฏ5178614944

<br/>
</div>												
"
							data-image="assets/img/sales/tabriz.jpg"
							data-group="sales"
							data-x="62"
							data-y="58"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">ููุงูุฏฺฏุงู ุขุฐุฑุจุงุฌุงูโุดุฑู</div>
						</div>

						<div
							class="marker"
							data-id="s5"
							data-desc="
							
	

							<div class='sales-popup-item'>
<h4>ฺฏู ุงูฺฉุชุฑฺฉ ูพุงุฑุช
</h4>
<b>ุดูุงุฑู ุชููู:</b>
02174965
<br/>
<b>ูุจุณุงุช: </b> www.goalelectric.ir
<br/>
<b>ุขุฏุฑุณ: </b>
ุชูุฑุงู -ุฎุงุจุงู ุทุงููุงู ุดุฑู ุจุนุฏ ุงุฒ ฺูุงุฑุฑุงู ุจูุงุฑ ุดูุงุฑู 74 ู 76 ุณุงุฎุชูุงู ฺฏู ุงูฺฉุชุฑฺฉ

<br/>
</div>	



							<div class='sales-popup-item'>
<h4>ุดุฑฺฉุช ูพุงุฑุช ุตูุนุช ุจุฑูุง ุจู ุงูููู
</h4>
<b>ุดูุงุฑู ุชููู:</b>
02188550355
<br/>
<b>ูุจุณุงุช: </b> www.parstehran.ir
<br/>
<b>ุขุฏุฑุณ: </b>
ุชูุฑุงู -ุฎุงุจุงู ููุนุตุฑ - ุจุงูุงุชุฑ ุงุฒ ุฎุงุจุงู ุดูุฏ ุจูุดุช-ุจุฑุฌ ุณูพูุฑ ุณุงุน - ุทุจูู ุฏูู -ูุงุญุฏ 1007
<br/>
</div>	



							<div class='sales-popup-item'>
<h4>ูพุฏุฏู ุณุงุฒุงู ุงููุงุณ ููุชูุฑ
</h4>
<b>ุดูุงุฑู ุชููู:</b>
02133935911
<br/>
<b>ุขุฏุฑุณ: </b>
ุชูุฑุงู ุฎุงุจุงู ุณุนุฏ ุฌููุจุ ูุฌุชูุน ุชุฌุงุฑ ุงุฏุงุฑ ุณุนุฏ ุทุจูู 6 ูุงุญุฏ 617

<br/>
</div>	



							<div class='sales-popup-item'>
<h4>ุดุฑฺฉุช ุงูุง ุตูุนุช ุจูุณุงุฒ
</h4>
<b>ุดูุงุฑู ุชููู:</b>
02136900486
<br/>
<b>ูุจุณุงุช: </b>   www.electromegagen.ir

<br/>
<b>ุขุฏุฑุณ: </b>
ุชูุฑุงู- ุฎุงุจุงู ุณุนุฏ ุฌููุจ - ูุฌุชูุน ุงููุงุณ ุณุนุฏ -ุทุจูู ุงูู -ูุงุญุฏ23

<br/>
</div>	



							<div class='sales-popup-item'>
<h4>ุดุฑฺฉุช ูพูุง ููุชูุฑ ุณูพุงูุงู
</h4>
<b>ุดูุงุฑู ุชููู:</b>
02162767000

<br/>
<b>ุขุฏุฑุณ: </b>
ุจุฒุฑฺฏุฑุงู ูุชุญ-45 ูุชุฑ ุฒุฑูุฏ-ุจููุงุฑ17ุดูุฑูุฑ-ูุจุด ุจููุงุฑ ุทุงููุณ-ูุฌุชูุน ุชุฌุงุฑ ุงุฌูุฑุงู-ูพูุงฺฉ5

<br/>
</div>	


							<div class='sales-popup-item'>
<h4>ุดุฑฺฉุช ููุชูุฑ ูพููพ ุงุฑุงู

</h4>
<b>ุดูุงุฑู ุชููู:</b>
02133118199

<br/>
<b>ุขุฏุฑุณ: </b>
ุชูุฑุงู-ุฎ ุณุนุฏ ุฌููุจ-ูุฑฺฉุฒุชุฌุงุฑ ุณุนุฏ-ุท1-ูุงุญุฏ106

<br/>
</div>	
"
							data-image="assets/img/sales/tehran.jpg"
							data-group="sales"
							data-x="84"
							data-y="76"
						>
							<div class="badge">
								<img src="assets/img/jemco-pin.png" />
							</div>
							<div class="label">ููุงูุฏฺฏุงู ุชูุฑุงู</div>
						</div>
						<!--End Sales-->

						<div
							class="marker"
							data-id="office"
							data-type="office"
							data-group="fixed"
							data-image="assets/img/jemco1.jpg"
							data-desc="
							<p>ุฌูฺฉูุ ุจุง ุณุงุจููโุง ุฏุฑุฎุดุงู ุฏุฑ ุทุฑุงุญ ู ุชููุฏ ุงูฺฉุชุฑูููุชูุฑุ ุจูโุนููุงู ูุฌููุนูโุง ูพุดุชุงุฒ ุฏุฑ ุตูุนุช ฺฉุดูุฑ ูุนุงูุช ูโฺฉูุฏ. ุชฺฉู ุจุฑ ุฏุงูุด ุชุฎุตุตุ ุฒุฑุณุงุฎุชโูุง ููู ูพุดุฑูุชู ู ุฑุนุงุช ุงุณุชุงูุฏุงุฑุฏูุง ุจูโุงููููุ ุฌูฺฉู ุฑุง ุจู ูุฏุฑุช ุนุธู ุฏุฑ ุจุงุฒุงุฑูุง ุตูุนุช ุฏุงุฎู ู ููุทููโุง ุชุจุฏู ฺฉุฑุฏู ุงุณุช.</p>
							<p>ุดุฑฺฉุช ูุงุดูโูุง ุงูฺฉุชุฑฺฉ ุฌูู (ุฌูฺฉู) ุฏุฑ ุณุงู ฑณถน ุจุง ูุฏู ฺฉุงูุด ูุงุจุณุชฺฏ ุตูุงุน ุฏุงุฎู ุจู ููุงุจุน ุฎุงุฑุฌุ ุฏุฑ ุดูุฑุณุชุงู ุณุจุฒูุงุฑ ุชุฃุณุณ ุดุฏ. ุงู ุดุฑฺฉุช ุจุง ุจูุฑูโฺฏุฑ ุงุฒ ูุฑููุง ูุชุฎุตุต ู ุชุฌูุฒุงุช ูพุดุฑูุชูุ ุทุฑุงุญุ ุณุงุฎุชุ ุชุณุช ู ุชุนูุฑ ุงููุงุน ุงูฺฉุชุฑูููุชูุฑูุง ู ฺูุฑุงุชูุฑูุง ุฑุง ุจูโุตูุฑุช ฺฉุงูู ุจุฑ ุนูุฏู ุฏุงุฑูุฏ.</p>

							<br/>
						<h3>	ฺุดูโุงูุฏุงุฒ ุฌูฺฉู</h3>
<p>ุฌูฺฉู ุจุง ูุฏู ุชููุฏ ูุญุตููุงุช ุจุฑุชุฑ ุฏุฑ ุงุฑุงู ู ุฎุงูุฑูุงููุ ุฑูฺฉุฑุฏ ูุจุชู ุจุฑ ฺฉูุชุ ููุขูุฑ ู ุฑูุงุจุชโูพุฐุฑ ุฏุงุฑุฏ. ุงุฒ ุงู ุฑูุ ุชูุงูุณุชู ุงุณุช ุฌุงฺฏุงู ูุงุจูโุงุนุชูุงุฏ ุฏุฑ ุจุงุฒุงุฑ ููุทูู ุจู ุฏุณุช ุขูุฑุฏ.</p>
<p>ุงุณุชูุงุฏู ุงุฒ ููุงุฏ ุงููู ุจุง ุงุณุชุงูุฏุงุฑุฏูุง ุจูโุงููููุ ุจูุฑูโููุฏ ุงุฒ ุชุฌูุฒุงุช ูพุดุฑูุชูุ ฺฉูุชุฑู ฺฉู ุฏูู ุฏุฑ ูุฑุงุญู ุชููุฏ ู ุจุฑุฎูุฑุฏุงุฑ ุงุฒ ูุฑู ุงูุณุงู ูุชุฎุตุตุ ููุงุงูฺฏุฑ ุชุนูุฏ ุฌูฺฉู ุจู ุงุฑุงุฆุฉ ูุญุตููุงุช ููโุชุฑุงุฒ ุจุง ฺฉูุช ุฌูุงู ู ุญูุธ ุฌุงฺฏุงู ุฎูุฏ ุจูโุนููุงู ุจุฑูุฏ ุจุฑุชุฑ ุตูุนุช ุงุณุช.</p>

<style>.h_iframe-aparat_embed_frame{position:relative;}.h_iframe-aparat_embed_frame .ratio{display:block;width:100%;height:auto;}.h_iframe-aparat_embed_frame iframe{position:absolute;top:0;left:0;width:100%;height:100%;}</style><div class='h_iframe-aparat_embed_frame'><span style='display: block;padding-top: 57%'></span><iframe src='https://www.aparat.com/video/video/embed/videohash/kyrbocp/vt/frame'  allowFullScreen='true' webkitallowfullscreen='true' mozallowfullscreen='true'></iframe></div>
							"
							data-x="90"
							data-y="81"
						>
							<div class="badge">
								<img src="assets/img/office.png" />
							</div>
							<div class="label">ุฏูุชุฑ ูุฑฺฉุฒ ุฌูฺฉู</div>
						</div>

						<div
							class="marker"
							data-id="factory"
							data-type="factory"
							data-group="fixed"
							data-image="assets/img/jemco-factory.jpg"
							data-x="118"
							data-y="77"
							data-desc="<p>

								ุงูฺฉุชุฑูููุชูุฑูุง ู ฺูุฑุงุชูุฑูุง ุฌูฺฉู ูุทุงุจู ุจุง ุงุณุชุงูุฏุงุฑุฏูุง ุจู ุงูููู ู ุณุงุฒูุงู ูู ุงุณุชุงูุฏุงุฑุฏ ุงุฑุงู ูุณุชูุฏ.
ููฺููุ ุฌูฺฉู ุฏุฑ ุฑุงุณุชุง ุจูุจูุฏ ูุฑููฺฏ ูุดุชุฑ ูุฏุงุฑ ุฌุฏุฏุชุฑู ุทุฑ ุญ ูุง ู ููุงุฏ ุฑุง ุจู ฺฉุงุฑ ูโุจุฑุฏ ุชุง ุจูุชุฑู ุนููฺฉุฑุฏ
ุงูฺฉุชุฑฺฉ ู ูฺฉุงูฺฉ ุฑุง ุงุฑุงุฆู ุฏูุฏ. ุฏุฑ ุทูู ุณู ุฏู ฺฏุฐุดุชูุ ููุฑุงู ุจุง ฺฏุณุชุฑุด ุตูุนุชุ ุงู ุดุฑฺฉุช ูุฒ ุฑุดุฏ ฺุดูฺฏุฑ
ุฏุงุดุชู ุงุณุช ู ุจุง ตฐฐ ููุฑ ูุฑู ฺฉุงุฑุ ุงุฒ ุฌููู ฑทด ูุชุฎุตุตุ ฑฒ ูุงุญุฏ ุชููุฏ ู ุฎุฏูุงุช ูพุดุชุจุงู ูุชูุฑฺฉุฒุ ุจู ุนููุงู
ุณุงุฒูุงู ุญุฑููโุง ูุฏุฑุช ู ุดูุฏ ู ูุญุตููุงุช ฺฏุณุชุฑุฏูโุง ุฑุง ุฏุฑ ุณุทุญ ููุ ุจู ุทูุฑ ูุณุชููุ ุฏุฑ ุชุงุฑููุง ุงูุชุฑูุช ู ููฺูู
ุงุฒ ุทุฑู ููุงูุฏฺฏูุง ุจู ูุฑูุด ู ุฑุณุงูุฏ.
							</p>
							<img class='inline-popup-image' src='assets/img/factory1.jpg'/>
							<p>
ุดุฑฺฉุช ุฌูฺฉู ุงูุฒูู ุจุฑ ุชุฃุฏ ุงุณุชุงูุฏุงุฑุฏ ูู ุงุฑุงู ู ุงุชุญุงุฏ ุงุฑููพุง (CE)ุ ุชุฃุฏ ATEX ุฑุง ุงุฒ ุดุฑฺฉุช ECM ุงุชุงูุง ุจุฑุง
ุงูฺฉุชุฑูููุชูุฑูุง ุถุฏุงููุฌุงุฑ ู ุชุฃุฏู ุดุฑฺฉุช DEDAL ุจูุบุงุฑุณุชุงู ุฑุง ุจุฑุง ุงูฺฉุชุฑูููุชูุฑูุง ุงุณุชุฎุฑุงุฌ ุฏูุฏ ุฏุฑุงูุช ฺฉุฑุฏู ุงุณุช. ุจุฑ
ุงู ุงุณุงุณุ ูู ุงูฺฉุชุฑูููุชูุฑูุง ู ฺูุฑุงุชูุฑูุง ุงู ุดุฑฺฉุช ุจุฏูู ูุฑฺฏููู ูุญุฏูุฏุช ุฌุบุฑุงูุง ุงูฺฉุงู ุงุณุชูุงุฏู ุฏุฑ ุณุทุญ ูู
ู ุจู ุงูููู ุฑุง ุฏุงุฑูุฏ. ููฺููุ ุดุฑฺฉุช ุฌูฺฉู ุฏุฑ ุณุงู ฑดฐฑ ูููู ุดุฏ ุนููุงู ยซุฏุงูุดโุจูุงูยป ุฑุง ุงุฒ ุณู ูุนุงููุช ุนูู
ุฑุงุณุช ุฌูููุฑ ุฏุฑุงูุช ฺฉูุฏ. ุงู ูฺฺฏโูุงุ ุงูฺฏุฒ ูุงุฒู ุฑุง ุจู ุดุฑฺฉุช ุฌูฺฉู ุฏุงุฏู ุงุณุช ุชุง ุจู ุชููุฏฺฉููุฏู ุง ุฌูุงู ุฏุฑ
ุตูุนุช ุงูฺฉุชุฑูููุชูุฑ ุชุจุฏู ุดูุฏ. ููฺูู ุดุฑฺฉุช ุฌูฺฉู ุฏุฑ ุฑุงุณุชุง ุจูุจูุฏ ูุฑููฺฏ ูุดุชุฑ ูุฏุงุฑ ุงูุฏุงู ุจู ุงุฑุงุฆู ุฎุฏูุงุช
ูพุณ ุงุฒ ูุฑูุด ุจู ุตูุฑุช 24 ุณุงุนุชู ฺฉุฑุฏู ุงุณุช
							</p>"
						>
							<div class="badge">
								<img src="assets/img/factory.png" />
							</div>
							<div class="label">ฺฉุงุฑุฎุงูู ุฌูฺฉู</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="hint">
			ุงู ููุงุฑุฏ ุชููุง ุจุฑุฎ ุงุฒ ูพุฑูฺูโูุง ููุฑุฏ ุงููุช ุฌูฺฉู ูุณุชูุฏ.
			<br />ุจุฑุง ูุดุงูุฏู ููุงูุฏฺฏุงูุ ุงุฒ ุจุฎุด ุจุงูุง ุตูุญู ุชฺฉ ููุงูุฏฺฏุงู ุฑุง ูุนุงู
			ฺฉูุฏ.
		</div>

		<div class="copyright">Powered By Mirka.agency๐</div>

		<!-- popup root placed outside of the map viewport so its scrolling isn't
		     intercepted by map pan/zoom handlers -->
		<div id="popupRoot"></div>

		<script>
			const clamp = (v, a, b) => Math.max(a, Math.min(b, v));

			const mapInner = document.getElementById("mapInner");
			const mapImage = document.getElementById("mapImage");
			const viewport = document.getElementById("viewport");
			let state = {
				scale: 1,
				minScale: 0.5,
				maxScale: 1.5,
				translateX: 0,
				translateY: 0,
				dragging: false,
				lastMouse: { x: 0, y: 0 },
			};
			function updateTransform() {
				mapInner.style.transform = `translate(-50%,-50%) translate(${state.translateX}px, ${state.translateY}px) scale(${state.scale})`;
			}

			function positionMarkers() {
				const markers = mapInner.querySelectorAll(".marker");
				const rect = mapImage.getBoundingClientRect();
				const width = rect.width;
				const height = rect.height;
				markers.forEach((m) => {
					const dx = parseFloat(m.dataset.x) || 0;
					const dy = parseFloat(m.dataset.y) || 0;
					const left = (dx / 100) * width;
					const top = (dy / 100) * height;
					m.style.left = left + "px";
					m.style.top = top + "px";
				});
			}
			function onImageReady() {
				const rect = mapImage.getBoundingClientRect();
				mapInner.style.width = rect.width + "px";
				mapInner.style.height = rect.height + "px";
				positionMarkers();

				const initialScale = 0.4; // 1 = default display size; >1 zooms in, <1 zooms out
				state.scale = clamp(
					initialScale,
					state.minScale,
					state.maxScale
				);
				state.translateX = 0; // optional: center on map
				state.translateY = 0;
				updateTransform();
			}
			window.addEventListener("resize", onImageReady);
			if (mapImage.complete) onImageReady();
			else mapImage.addEventListener("load", onImageReady);

			viewport.addEventListener("mousedown", (e) => {
				if (e.button !== 0) return;
				state.dragging = true;
				state.lastMouse = { x: e.clientX, y: e.clientY };
				viewport.style.cursor = "grabbing";
			});
			window.addEventListener("mouseup", () => {
				state.dragging = false;
				viewport.style.cursor = "";
			});
			window.addEventListener("mousemove", (e) => {
				if (!state.dragging) return;
				const dx = e.clientX - state.lastMouse.x;
				const dy = e.clientY - state.lastMouse.y;
				state.lastMouse = { x: e.clientX, y: e.clientY };
				state.translateX += dx;
				state.translateY += dy;
				limitPan();
				updateTransform();
			});

			viewport.addEventListener(
				"wheel",
				(e) => {
					e.preventDefault();
					const delta = -e.deltaY * 0.0015;
					zoomAt(e.clientX, e.clientY, 1 + delta);
				},
				{ passive: false }
			);
			function zoomAt(clientX, clientY, zoomFactor) {
				const oldScale = state.scale;
				const newScale = clamp(
					oldScale * zoomFactor,
					state.minScale,
					state.maxScale
				);

				if (newScale === oldScale) return;

				// Map element rect (screen coords)
				const mapRect = mapInner.getBoundingClientRect();

				// offset of pointer inside map (screen px)
				const offsetX = clientX - mapRect.left;
				const offsetY = clientY - mapRect.top;

				// compute local (unscaled) coordinate of pointer relative to map image origin
				const localX = (offsetX - state.translateX) / oldScale;
				const localY = (offsetY - state.translateY) / oldScale;

				// compute new translate so newScale * local + newTranslate = offset
				state.translateX = offsetX - newScale * localX;
				state.translateY = offsetY - newScale * localY;

				state.scale = newScale;
				limitPan();
				updateTransform();
			}
			function limitPan() {
				const mapRect = mapInner.getBoundingClientRect();
				const vpRect = viewport.getBoundingClientRect();
				const scaledW = mapRect.width;
				const scaledH = mapRect.height;
				state.translateX = clamp(
					state.translateX,
					-scaledW * 2,
					scaledW * 2
				);
				state.translateY = clamp(
					state.translateY,
					-scaledH * 2,
					scaledH * 2
				);
			}

			document.getElementById("zoom-in").addEventListener("click", () => {
				const vp = viewport.getBoundingClientRect();
				zoomAt(vp.left + vp.width / 2, vp.top + vp.height / 2, 1.18);
			});
			document
				.getElementById("zoom-out")
				.addEventListener("click", () => {
					const vp = viewport.getBoundingClientRect();
					zoomAt(
						vp.left + vp.width / 2,
						vp.top + vp.height / 2,
						0.86
					);
				});

			// touch
			let lastTouchDist = null;
			let lastTouchCenter = null;
			viewport.addEventListener(
				"touchstart",
				(e) => {
					if (e.touches.length === 1) {
						state.dragging = true;
						state.lastMouse = {
							x: e.touches[0].clientX,
							y: e.touches[0].clientY,
						};
					} else if (e.touches.length === 2) {
						state.dragging = false;
						lastTouchDist = distance(e.touches[0], e.touches[1]);
						lastTouchCenter = centerPoint(
							e.touches[0],
							e.touches[1]
						);
					}
				},
				{ passive: true }
			);
			viewport.addEventListener(
				"touchmove",
				(e) => {
					if (e.touches.length === 1 && state.dragging) {
						const t = e.touches[0];
						const dx = t.clientX - state.lastMouse.x;
						const dy = t.clientY - state.lastMouse.y;
						state.lastMouse = { x: t.clientX, y: t.clientY };
						state.translateX += dx;
						state.translateY += dy;
						limitPan();
						updateTransform();
					} else if (e.touches.length === 2) {
						const d = distance(e.touches[0], e.touches[1]);
						const c = centerPoint(e.touches[0], e.touches[1]);
						if (lastTouchDist) {
							const factor = d / lastTouchDist;
							zoomAt(c.clientX, c.clientY, factor);
						}
						lastTouchDist = d;
						lastTouchCenter = c;
					}
				},
				{ passive: false }
			);
			viewport.addEventListener(
				"touchend",
				(e) => {
					if (e.touches.length === 0) {
						state.dragging = false;
						lastTouchDist = null;
						lastTouchCenter = null;
					}
				},
				{ passive: true }
			);
			function distance(a, b) {
				return Math.hypot(a.clientX - b.clientX, a.clientY - b.clientY);
			}
			function centerPoint(a, b) {
				return {
					clientX: (a.clientX + b.clientX) / 2,
					clientY: (a.clientY + b.clientY) / 2,
				};
			}

			// popup + sounds
			const popupRoot = document.getElementById("popupRoot");
			const clickAudio = document.getElementById("clickAudio");
			const bgAudio = document.getElementById("bgAudio");
			const audioToggle = document.getElementById("audioToggle");
			let bgPlaying = false;

			// toggle background audio (user interaction required in many browsers)
			audioToggle.addEventListener("click", () => {
				if (!bgPlaying) {
					// try to play
					bgAudio
						.play()
						.then(() => {
							bgPlaying = true;
							audioToggle.textContent = "โธ";
						})
						.catch(() => {
							audioToggle.textContent = "โถ";
							alert(
								"Browser blocked autoplay. Interact with the page (click) and try again."
							);
						});
				} else {
					bgAudio.pause();
					bgPlaying = false;
					audioToggle.textContent = "โถ";
				}
			});

			mapInner.addEventListener("click", (e) => {
				const marker = e.target.closest(".marker");
				if (!marker) return;
				e.stopPropagation();
				openPopupFor(marker);
			});
			window.addEventListener("click", () => {
				/* clicking outside closes popup */ if (
					!popupRoot.querySelector(".popup-full-backdrop")
				)
					return;
				closePopup();
			});

			function openPopupFor(marker) {
				closePopup();
				// play click/open sound if available
				try {
					clickAudio.currentTime = 0;
					clickAudio.play().catch(() => {});
				} catch (e) {}

				const id = marker.dataset.id || "unknown";
				const title =
					(marker.querySelector(".label") || {}).textContent || id;
				const imageSrc = marker.dataset.image || "";
				const desc = marker.dataset.desc || "ุจุฏูู ุชูุถุญุงุช";

				const html = `
        <div class="popup-full-backdrop popup-animate" data-marker="${id}">
          <div class="popup-full">
            <div class="popup-left">
              ${
					imageSrc
						? `<img src="${imageSrc}" alt="${title}">`
						: `<div style="color:var(--muted);text-align:center;padding:22px;">ุจุฏูู ุชุตูุฑ</div>`
				}
            </div>
            <div class="popup-right">
              <div class="close" id="popupClose">โ</div>
              <h2>${title}</h2>
              <p>${desc}</p>
             <!-- <div class="popup-actions">
                <button class="btn" id="action1">View Gallery</button>
                <button class="btn" id="action2">Contact</button>
              </div>-->
            </div>
          </div>
        </div>
      `;

				popupRoot.innerHTML = html;
				const backdrop = popupRoot.querySelector(
					".popup-full-backdrop"
				);
				// prevent event trickle closing when clicking inside
				backdrop.addEventListener("click", (ev) => {
					if (ev.target === backdrop) closePopup();
				});
				const closeBtn = popupRoot.querySelector("#popupClose");
				if (closeBtn)
					closeBtn.addEventListener("click", (ev) => {
						ev.stopPropagation();
						closePopup();
					});

				// Prevent map pan/zoom while interacting with popup scroll area
				const popupRight = popupRoot.querySelector(".popup-right");
				if (popupRight) {
					// stop wheel events from reaching the viewport/map
					popupRight.addEventListener(
						"wheel",
						(ev) => {
							ev.stopPropagation();
						},
						{ passive: false }
					);

					// for touch devices, stop touchmove propagation when touching the popup
					popupRight.addEventListener(
						"touchstart",
						(ev) => {
							ev.stopPropagation();
						},
						{ passive: true }
					);
					popupRight.addEventListener(
						"touchmove",
						(ev) => {
							ev.stopPropagation();
						},
						{ passive: false }
					);
				}

				// animate transform for map to focus on marker (optional subtle zoom)
				// play an extra short flourish sound if desired (re-using clickAudio)
			}
			function closePopup() {
				popupRoot.innerHTML = "";
			}

			// toggles
			const projectsCheckbox =
				document.getElementById("projects-checkbox");
			const salesCheckbox = document.getElementById("sales-checkbox");
			function applyToggles() {
				const markers = mapInner.querySelectorAll(".marker");
				markers.forEach((m) => {
					const g = m.dataset.group || "";
					if (g === "projects")
						m.style.display = projectsCheckbox.checked
							? "flex"
							: "none";
					if (g === "sales")
						m.style.display = salesCheckbox.checked
							? "flex"
							: "none";
				});
			}
			projectsCheckbox.addEventListener("change", applyToggles);
			salesCheckbox.addEventListener("change", applyToggles);
			salesCheckbox.checked = false;
			applyToggles();

			let ro = new ResizeObserver(() => {
				onImageReady();
			});
			ro.observe(mapImage);

			(function starfield() {
				const c = document.getElementById("stars");
				const ctx = c.getContext("2d");
				let w,
					h,
					stars = [];
				function resize() {
					w = innerWidth;
					h = innerHeight;
					c.width = w;
					c.height = h;
					init();
				}
				function init() {
					stars = [];
					for (let i = 0; i < 120; i++) {
						stars.push({
							x: Math.random() * w,
							y: Math.random() * h,
							r: Math.random() * 1.6 + 0.2,
							a: Math.random() * 0.9,
						});
					}
				}
				function draw() {
					ctx.clearRect(0, 0, w, h);
					for (const s of stars) {
						ctx.globalAlpha = s.a;
						ctx.beginPath();
						ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
						ctx.fillStyle = "#8ab6ff";
						ctx.fill();
					}
				}
				window.addEventListener("resize", resize);
				resize();
				function loop() {
					for (const s of stars) {
						s.x += (Math.random() - 0.5) * 0.4;
						s.y += (Math.random() - 0.5) * 0.4;
						s.a = 0.6 + Math.sin(Date.now() / 1000 + s.x) * 0.3;
					}
					draw();
					requestAnimationFrame(loop);
				}
				loop();
			})();

			window.addMarker = function (opts) {
				const el = document.createElement("div");
				el.className = "marker";
				el.dataset.id = opts.id || "m" + Date.now();
				el.dataset.x = opts.x || 0;
				el.dataset.y = opts.y || 0;
				el.dataset.group = opts.group || "projects";
				if (opts.type) el.dataset.type = opts.type;
				if (opts.image) el.dataset.image = opts.image;
				if (opts.desc) el.dataset.desc = opts.desc;
				el.innerHTML = `<div class="badge">${(
					opts.label ||
					opts.id ||
					"M"
				).slice(0, 2)}</div><div class="label">${
					opts.label || opts.id
				}</div>`;
				mapInner.appendChild(el);
				onImageReady();
				applyToggles();
				return el;
			};

			window.addEventListener("keydown", (e) => {
				if (e.key === "+") document.getElementById("zoom-in").click();
				if (e.key === "-") document.getElementById("zoom-out").click();
			});
		</script>
	</body>
</html>
